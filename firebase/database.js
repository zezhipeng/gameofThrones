(function() {var g,aa=this;function n(a){return void 0!==a}function ba(){}function ca(a){a.Vb=function(){return a.Ye?a.Ye:a.Ye=new a}}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return"array"==da(a)}function fa(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function p(a){return"string"==typeof a}function ga(a){return"number"==typeof a}function ha(a){return"function"==da(a)}function ia(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ja(a,b,c){return a.call.apply(a.bind,arguments)}
function ka(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function q(a,b,c){q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka;return q.apply(null,arguments)}
function la(a,b){function c(){}c.prototype=b.prototype;a.wg=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.sg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ma(){this.Wa=-1};function na(){this.Wa=-1;this.Wa=64;this.M=[];this.Wd=[];this.Af=[];this.zd=[];this.zd[0]=128;for(var a=1;a<this.Wa;++a)this.zd[a]=0;this.Pd=this.$b=0;this.reset()}la(na,ma);na.prototype.reset=function(){this.M[0]=1732584193;this.M[1]=4023233417;this.M[2]=2562383102;this.M[3]=271733878;this.M[4]=3285377520;this.Pd=this.$b=0};
function oa(a,b,c){c||(c=0);var d=a.Af;if(p(b))for(var e=0;16>e;e++)d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(f<<1|f>>>31)&4294967295}b=a.M[0];c=a.M[1];for(var h=a.M[2],k=a.M[3],m=a.M[4],l,e=0;80>e;e++)40>e?20>e?(f=k^c&(h^k),l=1518500249):(f=c^h^k,l=1859775393):60>e?(f=c&h|k&(c|h),l=2400959708):(f=c^h^k,l=3395469782),f=(b<<
5|b>>>27)+f+m+l+d[e]&4294967295,m=k,k=h,h=(c<<30|c>>>2)&4294967295,c=b,b=f;a.M[0]=a.M[0]+b&4294967295;a.M[1]=a.M[1]+c&4294967295;a.M[2]=a.M[2]+h&4294967295;a.M[3]=a.M[3]+k&4294967295;a.M[4]=a.M[4]+m&4294967295}
na.prototype.update=function(a,b){if(null!=a){n(b)||(b=a.length);for(var c=b-this.Wa,d=0,e=this.Wd,f=this.$b;d<b;){if(0==f)for(;d<=c;)oa(this,a,d),d+=this.Wa;if(p(a))for(;d<b;){if(e[f]=a.charCodeAt(d),++f,++d,f==this.Wa){oa(this,e);f=0;break}}else for(;d<b;)if(e[f]=a[d],++f,++d,f==this.Wa){oa(this,e);f=0;break}}this.$b=f;this.Pd+=b}};function pa(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);}function qa(){this.Fd=void 0}
function ra(a,b,c){switch(typeof b){case "string":sa(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(null==b){c.push("null");break}if(ea(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),e=b[f],ra(a,a.Fd?a.Fd.call(b,String(f),e):e,c),e=",";c.push("]");break}c.push("{");d="";for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&(e=b[f],"function"!=typeof e&&(c.push(d),sa(f,c),
c.push(":"),ra(a,a.Fd?a.Fd.call(b,f,e):e,c),d=","));c.push("}");break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var ta={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},ua=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function sa(a,b){b.push('"',a.replace(ua,function(a){if(a in ta)return ta[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return ta[a]=e+b.toString(16)}),'"')};function r(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function va(a,b){var c={},d;for(d in a)c[d]=b.call(void 0,a[d],d,a);return c}function wa(a,b){for(var c in a)if(!b.call(void 0,a[c],c,a))return!1;return!0}function xa(a){var b=0,c;for(c in a)b++;return b}function ya(a){for(var b in a)return b}function za(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Aa(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Ba(a,b){for(var c in a)if(a[c]==b)return!0;return!1}
function Ca(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d}function Da(a,b){var c=Ca(a,b,void 0);return c&&a[c]}function Ea(a){for(var b in a)return!1;return!0}function Fa(a){var b={},c;for(c in a)b[c]=a[c];return b};var t=Array.prototype,Ga=t.indexOf?function(a,b,c){return t.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(p(a))return p(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ha=t.forEach?function(a,b,c){t.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ia=t.filter?function(a,b,c){return t.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,h=p(a)?
a.split(""):a,k=0;k<d;k++)if(k in h){var m=h[k];b.call(c,m,k,a)&&(e[f++]=m)}return e},Ja=t.map?function(a,b,c){return t.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=p(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ka=t.reduce?function(a,b,c,d){for(var e=[],f=1,h=arguments.length;f<h;f++)e.push(arguments[f]);d&&(e[0]=q(b,d));return t.reduce.apply(a,e)}:function(a,b,c,d){var e=c;Ha(a,function(c,h){e=b.call(d,e,c,h,a)});return e},La=t.every?function(a,b,
c){return t.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function Ma(a,b){var c=Na(a,b,void 0);return 0>c?null:p(a)?a.charAt(c):a[c]}function Na(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Oa(a,b){var c=Ga(a,b);0<=c&&t.splice.call(a,c,1)}function Pa(a,b,c){return 2>=arguments.length?t.slice.call(a,b):t.slice.call(a,b,c)}
function Qa(a,b){a.sort(b||Ra)}function Ra(a,b){return a>b?1:a<b?-1:0};var v;a:{var Sa=aa.navigator;if(Sa){var Ta=Sa.userAgent;if(Ta){v=Ta;break a}}v=""};var Ua=-1!=v.indexOf("Opera")||-1!=v.indexOf("OPR"),Va=-1!=v.indexOf("Trident")||-1!=v.indexOf("MSIE"),Wa=-1!=v.indexOf("Gecko")&&-1==v.toLowerCase().indexOf("webkit")&&!(-1!=v.indexOf("Trident")||-1!=v.indexOf("MSIE")),Xa=-1!=v.toLowerCase().indexOf("webkit");
(function(){var a="",b;if(Ua&&aa.opera)return a=aa.opera.version,ha(a)?a():a;Wa?b=/rv\:([^\);]+)(\)|;)/:Va?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Xa&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(v))?a[1]:"");return Va&&(b=(b=aa.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();var Ya=null,Za=null,$a=null;function ab(a,b){if(!fa(a))throw Error("encodeByteArray takes an array as a parameter");bb();for(var c=b?Za:Ya,d=[],e=0;e<a.length;e+=3){var f=a[e],h=e+1<a.length,k=h?a[e+1]:0,m=e+2<a.length,l=m?a[e+2]:0,u=f>>2,f=(f&3)<<4|k>>4,k=(k&15)<<2|l>>6,l=l&63;m||(l=64,h||(k=64));d.push(c[u],c[f],c[k],c[l])}return d.join("")}
function bb(){if(!Ya){Ya={};Za={};$a={};for(var a=0;65>a;a++)Ya[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a),Za[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a),$a[Za[a]]=a,62<=a&&($a["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)]=a)}};function cb(a,b){if(!a)throw db(b);}function db(a){return Error("Firebase Database ("+firebase.SDK_VERSION+") INTERNAL ASSERT FAILED: "+a)};function eb(a){return"undefined"!==typeof JSON&&n(JSON.parse)?JSON.parse(a):pa(a)}function w(a){if("undefined"!==typeof JSON&&n(JSON.stringify))a=JSON.stringify(a);else{var b=[];ra(new qa,a,b);a=b.join("")}return a};function fb(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function x(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]}function gb(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(c,a[c])};var hb=firebase.Promise;function ib(){var a=this;this.reject=this.resolve=null;this.ra=new hb(function(b,c){a.resolve=b;a.reject=c})}function jb(a,b){return function(c,d){c?a.reject(c):a.resolve(d);ha(b)&&(kb(a.ra),1===b.length?b(c):b(c,d))}}function kb(a){a.then(void 0,ba)};function lb(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);55296<=e&&56319>=e&&(e-=55296,d++,cb(d<a.length,"Surrogate pair missing trail surrogate."),e=65536+(e<<10)+(a.charCodeAt(d)-56320));128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(65536>e?b[c++]=e>>12|224:(b[c++]=e>>18|240,b[c++]=e>>12&63|128),b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b}function mb(a){for(var b=0,c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b++:2048>d?b+=2:55296<=d&&56319>=d?(b+=4,c++):b+=3}return b};function nb(a){var b=[];gb(a,function(a,d){ea(d)?Ha(d,function(d){b.push(encodeURIComponent(a)+"="+encodeURIComponent(d))}):b.push(encodeURIComponent(a)+"="+encodeURIComponent(d))});return b.length?"&"+b.join("&"):""};function y(a,b,c,d){var e;d<b?e="at least "+b:d>c&&(e=0===c?"none":"no more than "+c);if(e)throw Error(a+" failed: Was called with "+d+(1===d?" argument.":" arguments.")+" Expects "+e+".");}function A(a,b,c){var d="";switch(b){case 1:d=c?"first":"First";break;case 2:d=c?"second":"Second";break;case 3:d=c?"third":"Third";break;case 4:d=c?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?");}return a=a+" failed: "+(d+" argument ")}
function B(a,b,c,d){if((!d||n(c))&&!ha(c))throw Error(A(a,b,d)+"must be a valid function.");}function ob(a,b,c){if(n(c)&&(!ia(c)||null===c))throw Error(A(a,b,!0)+"must be a valid context object.");};function pb(a,b){this.committed=a;this.snapshot=b};function qb(a){this.oc=a}qb.prototype.getToken=function(a){return this.oc.INTERNAL.getToken(a).then(null,function(a){return a&&"auth/token-not-initialized"===a.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(a)})};function rb(a,b){a.oc.INTERNAL.addAuthTokenListener(b)};function sb(a,b){this.type=tb;this.source=a;this.path=b}sb.prototype.Mc=function(){return this.path.e()?new sb(this.source,D):new sb(this.source,E(this.path))};sb.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" listen_complete)"};function ub(a,b,c){this.type=vb;this.source=a;this.path=b;this.Ga=c}ub.prototype.Mc=function(a){return this.path.e()?new ub(this.source,D,this.Ga.Q(a)):new ub(this.source,E(this.path),this.Ga)};ub.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" overwrite: "+this.Ga.toString()+")"};function wb(a,b){return xb(a.name,b.name)}function yb(a,b){return xb(a,b)};function G(a,b){this.name=a;this.R=b}function zb(a,b){return new G(a,b)};function Ab(){this.Jd=H}Ab.prototype.j=function(a){return this.Jd.P(a)};Ab.prototype.toString=function(){return this.Jd.toString()};function Bb(){this.tc={}}function Cb(a,b,c){n(c)||(c=1);fb(a.tc,b)||(a.tc[b]=0);a.tc[b]+=c}Bb.prototype.get=function(){return Fa(this.tc)};function Db(a){this.Ef=a;this.rd=null}Db.prototype.get=function(){var a=this.Ef.get(),b=Fa(a);if(this.rd)for(var c in this.rd)b[c]-=this.rd[c];this.rd=a;return b};function Eb(a){this.uc=a;this.Cd="firebase:"}g=Eb.prototype;g.set=function(a,b){null==b?this.uc.removeItem(this.Cd+a):this.uc.setItem(this.Cd+a,w(b))};g.get=function(a){a=this.uc.getItem(this.Cd+a);return null==a?null:eb(a)};g.remove=function(a){this.uc.removeItem(this.Cd+a)};g.Ze=!1;g.toString=function(){return this.uc.toString()};function Fb(){this.pc={}}Fb.prototype.set=function(a,b){null==b?delete this.pc[a]:this.pc[a]=b};Fb.prototype.get=function(a){return fb(this.pc,a)?this.pc[a]:null};Fb.prototype.remove=function(a){delete this.pc[a]};Fb.prototype.Ze=!0;function Gb(a){try{if("undefined"!==typeof window&&"undefined"!==typeof window[a]){var b=window[a];b.setItem("firebase:sentinel","cache");b.removeItem("firebase:sentinel");return new Eb(b)}}catch(c){}return new Fb}var Hb=Gb("localStorage"),Ib=Gb("sessionStorage");function Jb(a,b,c,d,e){this.host=a.toLowerCase();this.domain=this.host.substr(this.host.indexOf(".")+1);this.Sc=b;this.pe=c;this.qg=d;this.gf=e||"";this.$a=Hb.get("host:"+a)||this.host}function Kb(a,b){b!==a.$a&&(a.$a=b,"s-"===a.$a.substr(0,2)&&Hb.set("host:"+a.host,a.$a))}
function Lb(a,b,c){I("string"===typeof b,"typeof type must == string");I("object"===typeof c,"typeof params must == object");if(b===Mb)b=(a.Sc?"wss://":"ws://")+a.$a+"/.ws?";else if(b===Nb)b=(a.Sc?"https://":"http://")+a.$a+"/.lp?";else throw Error("Unknown connection type: "+b);a.host!==a.$a&&(c.ns=a.pe);var d=[];r(c,function(a,b){d.push(b+"="+a)});return b+d.join("&")}Jb.prototype.toString=function(){var a=(this.Sc?"https://":"http://")+this.host;this.gf&&(a+="<"+this.gf+">");return a};function Ob(a,b){return a&&"object"===typeof a?(I(".sv"in a,"Unexpected leaf node or priority contents"),b[a[".sv"]]):a}function Pb(a,b){var c=new Qb;Rb(a,new J(""),function(a,e){Sb(c,a,Tb(e,b))});return c}function Tb(a,b){var c=a.C().H(),c=Ob(c,b),d;if(a.J()){var e=Ob(a.Ca(),b);return e!==a.Ca()||c!==a.C().H()?new Ub(e,K(c)):a}d=a;c!==a.C().H()&&(d=d.fa(new Ub(c)));a.O(L,function(a,c){var e=Tb(c,b);e!==c&&(d=d.T(a,e))});return d};function Vb(a,b){this.La=a;this.ba=b?b:Wb}g=Vb.prototype;g.Oa=function(a,b){return new Vb(this.La,this.ba.Oa(a,b,this.La).X(null,null,!1,null,null))};g.remove=function(a){return new Vb(this.La,this.ba.remove(a,this.La).X(null,null,!1,null,null))};g.get=function(a){for(var b,c=this.ba;!c.e();){b=this.La(a,c.key);if(0===b)return c.value;0>b?c=c.left:0<b&&(c=c.right)}return null};
function Xb(a,b){for(var c,d=a.ba,e=null;!d.e();){c=a.La(b,d.key);if(0===c){if(d.left.e())return e?e.key:null;for(d=d.left;!d.right.e();)d=d.right;return d.key}0>c?d=d.left:0<c&&(e=d,d=d.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?");}g.e=function(){return this.ba.e()};g.count=function(){return this.ba.count()};g.Gc=function(){return this.ba.Gc()};g.ec=function(){return this.ba.ec()};g.ha=function(a){return this.ba.ha(a)};
g.Wb=function(a){return new Yb(this.ba,null,this.La,!1,a)};g.Xb=function(a,b){return new Yb(this.ba,a,this.La,!1,b)};g.Zb=function(a,b){return new Yb(this.ba,a,this.La,!0,b)};g.We=function(a){return new Yb(this.ba,null,this.La,!0,a)};function Yb(a,b,c,d,e){this.Hd=e||null;this.le=d;this.Pa=[];for(e=1;!a.e();)if(e=b?c(a.key,b):1,d&&(e*=-1),0>e)a=this.le?a.left:a.right;else if(0===e){this.Pa.push(a);break}else this.Pa.push(a),a=this.le?a.right:a.left}
function M(a){if(0===a.Pa.length)return null;var b=a.Pa.pop(),c;c=a.Hd?a.Hd(b.key,b.value):{key:b.key,value:b.value};if(a.le)for(b=b.left;!b.e();)a.Pa.push(b),b=b.right;else for(b=b.right;!b.e();)a.Pa.push(b),b=b.left;return c}function Zb(a){if(0===a.Pa.length)return null;var b;b=a.Pa;b=b[b.length-1];return a.Hd?a.Hd(b.key,b.value):{key:b.key,value:b.value}}function $b(a,b,c,d,e){this.key=a;this.value=b;this.color=null!=c?c:!0;this.left=null!=d?d:Wb;this.right=null!=e?e:Wb}g=$b.prototype;
g.X=function(a,b,c,d,e){return new $b(null!=a?a:this.key,null!=b?b:this.value,null!=c?c:this.color,null!=d?d:this.left,null!=e?e:this.right)};g.count=function(){return this.left.count()+1+this.right.count()};g.e=function(){return!1};g.ha=function(a){return this.left.ha(a)||a(this.key,this.value)||this.right.ha(a)};function ac(a){return a.left.e()?a:ac(a.left)}g.Gc=function(){return ac(this).key};g.ec=function(){return this.right.e()?this.key:this.right.ec()};
g.Oa=function(a,b,c){var d,e;e=this;d=c(a,e.key);e=0>d?e.X(null,null,null,e.left.Oa(a,b,c),null):0===d?e.X(null,b,null,null,null):e.X(null,null,null,null,e.right.Oa(a,b,c));return bc(e)};function cc(a){if(a.left.e())return Wb;a.left.ea()||a.left.left.ea()||(a=dc(a));a=a.X(null,null,null,cc(a.left),null);return bc(a)}
g.remove=function(a,b){var c,d;c=this;if(0>b(a,c.key))c.left.e()||c.left.ea()||c.left.left.ea()||(c=dc(c)),c=c.X(null,null,null,c.left.remove(a,b),null);else{c.left.ea()&&(c=ec(c));c.right.e()||c.right.ea()||c.right.left.ea()||(c=fc(c),c.left.left.ea()&&(c=ec(c),c=fc(c)));if(0===b(a,c.key)){if(c.right.e())return Wb;d=ac(c.right);c=c.X(d.key,d.value,null,null,cc(c.right))}c=c.X(null,null,null,null,c.right.remove(a,b))}return bc(c)};g.ea=function(){return this.color};
function bc(a){a.right.ea()&&!a.left.ea()&&(a=gc(a));a.left.ea()&&a.left.left.ea()&&(a=ec(a));a.left.ea()&&a.right.ea()&&(a=fc(a));return a}function dc(a){a=fc(a);a.right.left.ea()&&(a=a.X(null,null,null,null,ec(a.right)),a=gc(a),a=fc(a));return a}function gc(a){return a.right.X(null,null,a.color,a.X(null,null,!0,null,a.right.left),null)}function ec(a){return a.left.X(null,null,a.color,null,a.X(null,null,!0,a.left.right,null))}
function fc(a){return a.X(null,null,!a.color,a.left.X(null,null,!a.left.color,null,null),a.right.X(null,null,!a.right.color,null,null))}function hc(){}g=hc.prototype;g.X=function(){return this};g.Oa=function(a,b){return new $b(a,b,null)};g.remove=function(){return this};g.count=function(){return 0};g.e=function(){return!0};g.ha=function(){return!1};g.Gc=function(){return null};g.ec=function(){return null};g.ea=function(){return!1};var Wb=new hc;var ic=function(){var a=1;return function(){return a++}}(),I=cb,jc=db;
function kc(a){try{var b;bb();for(var c=$a,d=[],e=0;e<a.length;){var f=c[a.charAt(e++)],h=e<a.length?c[a.charAt(e)]:0;++e;var k=e<a.length?c[a.charAt(e)]:64;++e;var m=e<a.length?c[a.charAt(e)]:64;++e;if(null==f||null==h||null==k||null==m)throw Error();d.push(f<<2|h>>4);64!=k&&(d.push(h<<4&240|k>>2),64!=m&&d.push(k<<6&192|m))}if(8192>d.length)b=String.fromCharCode.apply(null,d);else{a="";for(c=0;c<d.length;c+=8192)a+=String.fromCharCode.apply(null,Pa(d,c,c+8192));b=a}return b}catch(l){C("base64Decode failed: ",
l)}return null}function lc(a){var b=lb(a);a=new na;a.update(b);var b=[],c=8*a.Pd;56>a.$b?a.update(a.zd,56-a.$b):a.update(a.zd,a.Wa-(a.$b-56));for(var d=a.Wa-1;56<=d;d--)a.Wd[d]=c&255,c/=256;oa(a,a.Wd);for(d=c=0;5>d;d++)for(var e=24;0<=e;e-=8)b[c]=a.M[d]>>e&255,++c;return ab(b)}function mc(a){for(var b="",c=0;c<arguments.length;c++)b=fa(arguments[c])?b+mc.apply(null,arguments[c]):"object"===typeof arguments[c]?b+w(arguments[c]):b+arguments[c],b+=" ";return b}var nc=null,oc=!0;
function pc(a,b){cb(!b||!0===a||!1===a,"Can't turn on custom loggers persistently.");!0===a?("undefined"!==typeof console&&("function"===typeof console.log?nc=q(console.log,console):"object"===typeof console.log&&(nc=function(a){console.log(a)})),b&&Ib.set("logging_enabled",!0)):ha(a)?nc=a:(nc=null,Ib.remove("logging_enabled"))}function C(a){!0===oc&&(oc=!1,null===nc&&!0===Ib.get("logging_enabled")&&pc(!0));if(nc){var b=mc.apply(null,arguments);nc(b)}}
function qc(a){return function(){C(a,arguments)}}function rc(a){if("undefined"!==typeof console){var b="FIREBASE INTERNAL ERROR: "+mc.apply(null,arguments);"undefined"!==typeof console.error?console.error(b):console.log(b)}}function sc(a){var b=mc.apply(null,arguments);throw Error("FIREBASE FATAL ERROR: "+b);}function N(a){if("undefined"!==typeof console){var b="FIREBASE WARNING: "+mc.apply(null,arguments);"undefined"!==typeof console.warn?console.warn(b):console.log(b)}}
function tc(a){var b,c,d,e,f,h=a;f=c=a=b="";d=!0;e="https";if(p(h)){var k=h.indexOf("//");0<=k&&(e=h.substring(0,k-1),h=h.substring(k+2));k=h.indexOf("/");-1===k&&(k=h.length);b=h.substring(0,k);f="";h=h.substring(k).split("/");for(k=0;k<h.length;k++)if(0<h[k].length){var m=h[k];try{m=decodeURIComponent(m.replace(/\+/g," "))}catch(l){}f+="/"+m}h=b.split(".");3===h.length?(a=h[1],c=h[0].toLowerCase()):2===h.length&&(a=h[0]);k=b.indexOf(":");0<=k&&(d="https"===e||"wss"===e)}"firebase"===a&&sc(b+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead");
c&&"undefined"!=c||sc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com");d||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&N("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");return{jc:new Jb(b,d,c,"ws"===e||"wss"===e),path:new J(f)}}function uc(a){return ga(a)&&(a!=a||a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)}
function vc(a){if("complete"===document.readyState)a();else{var b=!1,c=function(){document.body?b||(b=!0,a()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}
function xb(a,b){if(a===b)return 0;if("[MIN_NAME]"===a||"[MAX_NAME]"===b)return-1;if("[MIN_NAME]"===b||"[MAX_NAME]"===a)return 1;var c=wc(a),d=wc(b);return null!==c?null!==d?0==c-d?a.length-b.length:c-d:-1:null!==d?1:a<b?-1:1}function xc(a,b){if(b&&a in b)return b[a];throw Error("Missing required key ("+a+") in object: "+w(b));}
function yc(a){if("object"!==typeof a||null===a)return w(a);var b=[],c;for(c in a)b.push(c);b.sort();c="{";for(var d=0;d<b.length;d++)0!==d&&(c+=","),c+=w(b[d]),c+=":",c+=yc(a[b[d]]);return c+"}"}function zc(a,b){if(a.length<=b)return[a];for(var c=[],d=0;d<a.length;d+=b)d+b>a?c.push(a.substring(d,a.length)):c.push(a.substring(d,d+b));return c}function Ac(a,b){if(ea(a))for(var c=0;c<a.length;++c)b(c,a[c]);else r(a,b)}
function Bc(a){I(!uc(a),"Invalid JSON number");var b,c,d,e;0===a?(d=c=0,b=-Infinity===1/a?1:0):(b=0>a,a=Math.abs(a),a>=Math.pow(2,-1022)?(d=Math.min(Math.floor(Math.log(a)/Math.LN2),1023),c=d+1023,d=Math.round(a*Math.pow(2,52-d)-Math.pow(2,52))):(c=0,d=Math.round(a/Math.pow(2,-1074))));e=[];for(a=52;a;--a)e.push(d%2?1:0),d=Math.floor(d/2);for(a=11;a;--a)e.push(c%2?1:0),c=Math.floor(c/2);e.push(b?1:0);e.reverse();b=e.join("");c="";for(a=0;64>a;a+=8)d=parseInt(b.substr(a,8),2).toString(16),1===d.length&&
(d="0"+d),c+=d;return c.toLowerCase()}var Cc=/^-?\d{1,10}$/;function wc(a){return Cc.test(a)&&(a=Number(a),-2147483648<=a&&2147483647>=a)?a:null}function Dc(a){try{a()}catch(b){setTimeout(function(){N("Exception was thrown by user callback.",b.stack||"");throw b;},Math.floor(0))}}function Ec(a,b,c){Object.defineProperty(a,b,{get:c})}function Fc(a,b){var c=setTimeout(a,b);"object"===typeof c&&c.unref&&c.unref();return c};function Gc(a){var b={},c={},d={},e="";try{var f=a.split("."),b=eb(kc(f[0])||""),c=eb(kc(f[1])||""),e=f[2],d=c.d||{};delete c.d}catch(h){}return{tg:b,Je:c,data:d,mg:e}}function Hc(a){a=Gc(a);var b=a.Je;return!!a.mg&&!!b&&"object"===typeof b&&b.hasOwnProperty("iat")}function Ic(a){a=Gc(a).Je;return"object"===typeof a&&!0===x(a,"admin")};function Jc(a,b,c){this.type=Kc;this.source=a;this.path=b;this.children=c}Jc.prototype.Mc=function(a){if(this.path.e())return a=this.children.subtree(new J(a)),a.e()?null:a.value?new ub(this.source,D,a.value):new Jc(this.source,D,a);I(O(this.path)===a,"Can't get a merge for a child not on the path of the operation");return new Jc(this.source,E(this.path),this.children)};Jc.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"};function Lc(a,b,c){this.f=qc("p:rest:");this.L=a;this.Gb=b;this.$c=c;this.$={}}function Mc(a,b){if(n(b))return"tag$"+b;I(Nc(a.m),"should have a tag if it's not a default query.");return a.path.toString()}g=Lc.prototype;
g.$e=function(a,b,c,d){var e=a.path.toString();this.f("Listen called for "+e+" "+a.ja());var f=Mc(a,c),h={};this.$[f]=h;a=Oc(a.m);var k=this;Pc(this,e+".json",a,function(a,b){var u=b;404===a&&(a=u=null);null===a&&k.Gb(e,u,!1,c);x(k.$,f)===h&&d(a?401==a?"permission_denied":"rest_error:"+a:"ok",null)})};g.uf=function(a,b){var c=Mc(a,b);delete this.$[c]};g.kf=function(){};g.re=function(){};g.cf=function(){};g.xd=function(){};g.put=function(){};g.af=function(){};g.ye=function(){};
function Pc(a,b,c,d){c=c||{};c.format="export";a.$c.getToken(!1).then(function(e){(e=e&&e.accessToken)&&(c.auth=e);var f=(a.L.Sc?"https://":"http://")+a.L.host+b+"?"+nb(c);a.f("Sending REST request for "+f);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(d&&4===h.readyState){a.f("REST Response for "+f+" received. status:",h.status,"response:",h.responseText);var b=null;if(200<=h.status&&300>h.status){try{b=eb(h.responseText)}catch(c){N("Failed to parse JSON response for "+f+": "+h.responseText)}d(null,
b)}else 401!==h.status&&404!==h.status&&N("Got unsuccessful REST response for "+f+" Status: "+h.status),d(h.status);d=null}};h.open("GET",f,!0);h.send()})};function Qc(){}var Rc={};function Sc(a){return q(a.compare,a)}Qc.prototype.nd=function(a,b){return 0!==this.compare(new G("[MIN_NAME]",a),new G("[MIN_NAME]",b))};Qc.prototype.Hc=function(){return Tc};function Uc(a){I(!a.e()&&".priority"!==O(a),"Can't create PathIndex with empty path or .priority key");this.bc=a}la(Uc,Qc);g=Uc.prototype;g.xc=function(a){return!a.P(this.bc).e()};g.compare=function(a,b){var c=a.R.P(this.bc),d=b.R.P(this.bc),c=c.sc(d);return 0===c?xb(a.name,b.name):c};
g.Ec=function(a,b){var c=K(a),c=H.F(this.bc,c);return new G(b,c)};g.Fc=function(){var a=H.F(this.bc,Vc);return new G("[MAX_NAME]",a)};g.toString=function(){return this.bc.slice().join("/")};function Wc(){}la(Wc,Qc);g=Wc.prototype;g.compare=function(a,b){var c=a.R.C(),d=b.R.C(),c=c.sc(d);return 0===c?xb(a.name,b.name):c};g.xc=function(a){return!a.C().e()};g.nd=function(a,b){return!a.C().Z(b.C())};g.Hc=function(){return Tc};g.Fc=function(){return new G("[MAX_NAME]",new Ub("[PRIORITY-POST]",Vc))};
g.Ec=function(a,b){var c=K(a);return new G(b,new Ub("[PRIORITY-POST]",c))};g.toString=function(){return".priority"};var L=new Wc;function Xc(){}la(Xc,Qc);g=Xc.prototype;g.compare=function(a,b){return xb(a.name,b.name)};g.xc=function(){throw jc("KeyIndex.isDefinedOn not expected to be called.");};g.nd=function(){return!1};g.Hc=function(){return Tc};g.Fc=function(){return new G("[MAX_NAME]",H)};g.Ec=function(a){I(p(a),"KeyIndex indexValue must always be a string.");return new G(a,H)};g.toString=function(){return".key"};
var Yc=new Xc;function Zc(){}la(Zc,Qc);g=Zc.prototype;g.compare=function(a,b){var c=a.R.sc(b.R);return 0===c?xb(a.name,b.name):c};g.xc=function(){return!0};g.nd=function(a,b){return!a.Z(b)};g.Hc=function(){return Tc};g.Fc=function(){return $c};g.Ec=function(a,b){var c=K(a);return new G(b,c)};g.toString=function(){return".value"};var ad=new Zc;function cd(a,b){this.od=a;this.cc=b}cd.prototype.get=function(a){var b=x(this.od,a);if(!b)throw Error("No index defined for "+a);return b===Rc?null:b};function dd(a,b,c){var d=va(a.od,function(d,f){var h=x(a.cc,f);I(h,"Missing index implementation for "+f);if(d===Rc){if(h.xc(b.R)){for(var k=[],m=c.Wb(zb),l=M(m);l;)l.name!=b.name&&k.push(l),l=M(m);k.push(b);return ed(k,Sc(h))}return Rc}h=c.get(b.name);k=d;h&&(k=k.remove(new G(b.name,h)));return k.Oa(b,b.R)});return new cd(d,a.cc)}
function fd(a,b,c){var d=va(a.od,function(a){if(a===Rc)return a;var d=c.get(b.name);return d?a.remove(new G(b.name,d)):a});return new cd(d,a.cc)}var gd=new cd({".priority":Rc},{".priority":L});function Ub(a,b){this.B=a;I(n(this.B)&&null!==this.B,"LeafNode shouldn't be created with null/undefined value.");this.aa=b||H;hd(this.aa);this.Db=null}var id=["object","boolean","number","string"];g=Ub.prototype;g.J=function(){return!0};g.C=function(){return this.aa};g.fa=function(a){return new Ub(this.B,a)};g.Q=function(a){return".priority"===a?this.aa:H};g.P=function(a){return a.e()?this:".priority"===O(a)?this.aa:H};g.Da=function(){return!1};g.Ve=function(){return null};
g.T=function(a,b){return".priority"===a?this.fa(b):b.e()&&".priority"!==a?this:H.T(a,b).fa(this.aa)};g.F=function(a,b){var c=O(a);if(null===c)return b;if(b.e()&&".priority"!==c)return this;I(".priority"!==c||1===jd(a),".priority must be the last token in a path");return this.T(c,H.F(E(a),b))};g.e=function(){return!1};g.Eb=function(){return 0};g.O=function(){return!1};g.H=function(a){return a&&!this.C().e()?{".value":this.Ca(),".priority":this.C().H()}:this.Ca()};
g.hash=function(){if(null===this.Db){var a="";this.aa.e()||(a+="priority:"+kd(this.aa.H())+":");var b=typeof this.B,a=a+(b+":"),a="number"===b?a+Bc(this.B):a+this.B;this.Db=lc(a)}return this.Db};g.Ca=function(){return this.B};g.sc=function(a){if(a===H)return 1;if(a instanceof P)return-1;I(a.J(),"Unknown node type");var b=typeof a.B,c=typeof this.B,d=Ga(id,b),e=Ga(id,c);I(0<=d,"Unknown leaf type: "+b);I(0<=e,"Unknown leaf type: "+c);return d===e?"object"===c?0:this.B<a.B?-1:this.B===a.B?0:1:e-d};
g.nb=function(){return this};g.yc=function(){return!0};g.Z=function(a){return a===this?!0:a.J()?this.B===a.B&&this.aa.Z(a.aa):!1};g.toString=function(){return w(this.H(!0))};function P(a,b,c){this.k=a;(this.aa=b)&&hd(this.aa);a.e()&&I(!this.aa||this.aa.e(),"An empty node cannot have a priority");this.yb=c;this.Db=null}g=P.prototype;g.J=function(){return!1};g.C=function(){return this.aa||H};g.fa=function(a){return this.k.e()?this:new P(this.k,a,this.yb)};g.Q=function(a){if(".priority"===a)return this.C();a=this.k.get(a);return null===a?H:a};g.P=function(a){var b=O(a);return null===b?this:this.Q(b).P(E(a))};g.Da=function(a){return null!==this.k.get(a)};
g.T=function(a,b){I(b,"We should always be passing snapshot nodes");if(".priority"===a)return this.fa(b);var c=new G(a,b),d,e;b.e()?(d=this.k.remove(a),c=fd(this.yb,c,this.k)):(d=this.k.Oa(a,b),c=dd(this.yb,c,this.k));e=d.e()?H:this.aa;return new P(d,e,c)};g.F=function(a,b){var c=O(a);if(null===c)return b;I(".priority"!==O(a)||1===jd(a),".priority must be the last token in a path");var d=this.Q(c).F(E(a),b);return this.T(c,d)};g.e=function(){return this.k.e()};g.Eb=function(){return this.k.count()};
var ld=/^(0|[1-9]\d*)$/;g=P.prototype;g.H=function(a){if(this.e())return null;var b={},c=0,d=0,e=!0;this.O(L,function(f,h){b[f]=h.H(a);c++;e&&ld.test(f)?d=Math.max(d,Number(f)):e=!1});if(!a&&e&&d<2*c){var f=[],h;for(h in b)f[h]=b[h];return f}a&&!this.C().e()&&(b[".priority"]=this.C().H());return b};g.hash=function(){if(null===this.Db){var a="";this.C().e()||(a+="priority:"+kd(this.C().H())+":");this.O(L,function(b,c){var d=c.hash();""!==d&&(a+=":"+b+":"+d)});this.Db=""===a?"":lc(a)}return this.Db};
g.Ve=function(a,b,c){return(c=md(this,c))?(a=Xb(c,new G(a,b)))?a.name:null:Xb(this.k,a)};function nd(a,b){var c;c=(c=md(a,b))?(c=c.Gc())&&c.name:a.k.Gc();return c?new G(c,a.k.get(c)):null}function od(a,b){var c;c=(c=md(a,b))?(c=c.ec())&&c.name:a.k.ec();return c?new G(c,a.k.get(c)):null}g.O=function(a,b){var c=md(this,a);return c?c.ha(function(a){return b(a.name,a.R)}):this.k.ha(b)};g.Wb=function(a){return this.Xb(a.Hc(),a)};
g.Xb=function(a,b){var c=md(this,b);if(c)return c.Xb(a,function(a){return a});for(var c=this.k.Xb(a.name,zb),d=Zb(c);null!=d&&0>b.compare(d,a);)M(c),d=Zb(c);return c};g.We=function(a){return this.Zb(a.Fc(),a)};g.Zb=function(a,b){var c=md(this,b);if(c)return c.Zb(a,function(a){return a});for(var c=this.k.Zb(a.name,zb),d=Zb(c);null!=d&&0<b.compare(d,a);)M(c),d=Zb(c);return c};g.sc=function(a){return this.e()?a.e()?0:-1:a.J()||a.e()?1:a===Vc?-1:0};
g.nb=function(a){if(a===Yc||Ba(this.yb.cc,a.toString()))return this;var b=this.yb,c=this.k;I(a!==Yc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var d=[],e=!1,c=c.Wb(zb),f=M(c);f;)e=e||a.xc(f.R),d.push(f),f=M(c);d=e?ed(d,Sc(a)):Rc;e=a.toString();c=Fa(b.cc);c[e]=a;a=Fa(b.od);a[e]=d;return new P(this.k,this.aa,new cd(a,c))};g.yc=function(a){return a===Yc||Ba(this.yb.cc,a.toString())};
g.Z=function(a){if(a===this)return!0;if(a.J())return!1;if(this.C().Z(a.C())&&this.k.count()===a.k.count()){var b=this.Wb(L);a=a.Wb(L);for(var c=M(b),d=M(a);c&&d;){if(c.name!==d.name||!c.R.Z(d.R))return!1;c=M(b);d=M(a)}return null===c&&null===d}return!1};function md(a,b){return b===Yc?null:a.yb.get(b.toString())}g.toString=function(){return w(this.H(!0))};function K(a,b){if(null===a)return H;var c=null;"object"===typeof a&&".priority"in a?c=a[".priority"]:"undefined"!==typeof b&&(c=b);I(null===c||"string"===typeof c||"number"===typeof c||"object"===typeof c&&".sv"in c,"Invalid priority type found: "+typeof c);"object"===typeof a&&".value"in a&&null!==a[".value"]&&(a=a[".value"]);if("object"!==typeof a||".sv"in a)return new Ub(a,K(c));if(a instanceof Array){var d=H,e=a;r(e,function(a,b){if(fb(e,b)&&"."!==b.substring(0,1)){var c=K(a);if(c.J()||!c.e())d=
d.T(b,c)}});return d.fa(K(c))}var f=[],h=!1,k=a;gb(k,function(a){if("string"!==typeof a||"."!==a.substring(0,1)){var b=K(k[a]);b.e()||(h=h||!b.C().e(),f.push(new G(a,b)))}});if(0==f.length)return H;var m=ed(f,wb,function(a){return a.name},yb);if(h){var l=ed(f,Sc(L));return new P(m,K(c),new cd({".priority":l},{".priority":L}))}return new P(m,K(c),gd)}var pd=Math.log(2);
function qd(a){this.count=parseInt(Math.log(a+1)/pd,10);this.Oe=this.count-1;this.Cf=a+1&parseInt(Array(this.count+1).join("1"),2)}function rd(a){var b=!(a.Cf&1<<a.Oe);a.Oe--;return b}
function ed(a,b,c,d){function e(b,d){var f=d-b;if(0==f)return null;if(1==f){var l=a[b],u=c?c(l):l;return new $b(u,l.R,!1,null,null)}var l=parseInt(f/2,10)+b,f=e(b,l),z=e(l+1,d),l=a[l],u=c?c(l):l;return new $b(u,l.R,!1,f,z)}a.sort(b);var f=function(b){function d(b,h){var k=u-b,z=u;u-=b;var z=e(k+1,z),k=a[k],F=c?c(k):k,z=new $b(F,k.R,h,null,z);f?f.left=z:l=z;f=z}for(var f=null,l=null,u=a.length,z=0;z<b.count;++z){var F=rd(b),bd=Math.pow(2,b.count-(z+1));F?d(bd,!1):(d(bd,!1),d(bd,!0))}return l}(new qd(a.length));
return null!==f?new Vb(d||b,f):new Vb(d||b)}function kd(a){return"number"===typeof a?"number:"+Bc(a):"string:"+a}function hd(a){if(a.J()){var b=a.H();I("string"===typeof b||"number"===typeof b||"object"===typeof b&&fb(b,".sv"),"Priority must be a string or number.")}else I(a===Vc||a.e(),"priority of unexpected type.");I(a===Vc||a.C().e(),"Priority nodes can't have a priority of their own.")}var H=new P(new Vb(yb),null,gd);function sd(){P.call(this,new Vb(yb),H,gd)}la(sd,P);g=sd.prototype;
g.sc=function(a){return a===this?0:1};g.Z=function(a){return a===this};g.C=function(){return this};g.Q=function(){return H};g.e=function(){return!1};var Vc=new sd,Tc=new G("[MIN_NAME]",H),$c=new G("[MAX_NAME]",Vc);function td(a,b){this.rf={};this.Vc=new Db(a);this.va=b;var c=1E4+2E4*Math.random();Fc(q(this.lf,this),Math.floor(c))}td.prototype.lf=function(){var a=this.Vc.get(),b={},c=!1,d;for(d in a)0<a[d]&&fb(this.rf,d)&&(b[d]=a[d],c=!0);c&&this.va.ye(b);Fc(q(this.lf,this),Math.floor(6E5*Math.random()))};var ud={},vd={};function wd(a){a=a.toString();ud[a]||(ud[a]=new Bb);return ud[a]}function xd(a,b){var c=a.toString();vd[c]||(vd[c]=b());return vd[c]};function yd(){this.set={}}g=yd.prototype;g.add=function(a,b){this.set[a]=null!==b?b:!0};g.contains=function(a){return fb(this.set,a)};g.get=function(a){return this.contains(a)?this.set[a]:void 0};g.remove=function(a){delete this.set[a]};g.clear=function(){this.set={}};g.e=function(){return Ea(this.set)};g.count=function(){return xa(this.set)};function zd(a,b){r(a.set,function(a,d){b(d,a)})}g.keys=function(){var a=[];r(this.set,function(b,c){a.push(c)});return a};function Ad(a){I(ea(a)&&0<a.length,"Requires a non-empty array");this.Bf=a;this.Dc={}}Ad.prototype.Ge=function(a,b){var c;c=this.Dc[a]||[];var d=c.length;if(0<d){for(var e=Array(d),f=0;f<d;f++)e[f]=c[f];c=e}else c=[];for(d=0;d<c.length;d++)c[d].Ie.apply(c[d].Ma,Array.prototype.slice.call(arguments,1))};Ad.prototype.gc=function(a,b,c){Bd(this,a);this.Dc[a]=this.Dc[a]||[];this.Dc[a].push({Ie:b,Ma:c});(a=this.Ue(a))&&b.apply(c,a)};
Ad.prototype.Ic=function(a,b,c){Bd(this,a);a=this.Dc[a]||[];for(var d=0;d<a.length;d++)if(a[d].Ie===b&&(!c||c===a[d].Ma)){a.splice(d,1);break}};function Bd(a,b){I(Ma(a.Bf,function(a){return a===b}),"Unknown event: "+b)};var Cd=function(){var a=0,b=[];return function(c){var d=c===a;a=c;for(var e=Array(8),f=7;0<=f;f--)e[f]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(c%64),c=Math.floor(c/64);I(0===c,"Cannot push at time == 0");c=e.join("");if(d){for(f=11;0<=f&&63===b[f];f--)b[f]=0;b[f]++}else for(f=0;12>f;f++)b[f]=Math.floor(64*Math.random());for(f=0;12>f;f++)c+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(b[f]);I(20===c.length,"nextPushId: Length should be 20.");
return c}}();function J(a,b){if(1==arguments.length){this.o=a.split("/");for(var c=0,d=0;d<this.o.length;d++)0<this.o[d].length&&(this.o[c]=this.o[d],c++);this.o.length=c;this.Y=0}else this.o=a,this.Y=b}function Q(a,b){var c=O(a);if(null===c)return b;if(c===O(b))return Q(E(a),E(b));throw Error("INTERNAL ERROR: innerPath ("+b+") is not within outerPath ("+a+")");}
function Dd(a,b){for(var c=a.slice(),d=b.slice(),e=0;e<c.length&&e<d.length;e++){var f=xb(c[e],d[e]);if(0!==f)return f}return c.length===d.length?0:c.length<d.length?-1:1}function O(a){return a.Y>=a.o.length?null:a.o[a.Y]}function jd(a){return a.o.length-a.Y}function E(a){var b=a.Y;b<a.o.length&&b++;return new J(a.o,b)}function Ed(a){return a.Y<a.o.length?a.o[a.o.length-1]:null}g=J.prototype;
g.toString=function(){for(var a="",b=this.Y;b<this.o.length;b++)""!==this.o[b]&&(a+="/"+this.o[b]);return a||"/"};g.slice=function(a){return this.o.slice(this.Y+(a||0))};g.parent=function(){if(this.Y>=this.o.length)return null;for(var a=[],b=this.Y;b<this.o.length-1;b++)a.push(this.o[b]);return new J(a,0)};
g.n=function(a){for(var b=[],c=this.Y;c<this.o.length;c++)b.push(this.o[c]);if(a instanceof J)for(c=a.Y;c<a.o.length;c++)b.push(a.o[c]);else for(a=a.split("/"),c=0;c<a.length;c++)0<a[c].length&&b.push(a[c]);return new J(b,0)};g.e=function(){return this.Y>=this.o.length};g.Z=function(a){if(jd(this)!==jd(a))return!1;for(var b=this.Y,c=a.Y;b<=this.o.length;b++,c++)if(this.o[b]!==a.o[c])return!1;return!0};
g.contains=function(a){var b=this.Y,c=a.Y;if(jd(this)>jd(a))return!1;for(;b<this.o.length;){if(this.o[b]!==a.o[c])return!1;++b;++c}return!0};var D=new J("");function Fd(a,b){this.Qa=a.slice();this.Ha=Math.max(1,this.Qa.length);this.Qe=b;for(var c=0;c<this.Qa.length;c++)this.Ha+=mb(this.Qa[c]);Gd(this)}Fd.prototype.push=function(a){0<this.Qa.length&&(this.Ha+=1);this.Qa.push(a);this.Ha+=mb(a);Gd(this)};Fd.prototype.pop=function(){var a=this.Qa.pop();this.Ha-=mb(a);0<this.Qa.length&&--this.Ha};
function Gd(a){if(768<a.Ha)throw Error(a.Qe+"has a key path longer than 768 bytes ("+a.Ha+").");if(32<a.Qa.length)throw Error(a.Qe+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Hd(a));}function Hd(a){return 0==a.Qa.length?"":"in property '"+a.Qa.join(".")+"'"};function Id(a){a instanceof Jd||sc("Don't call new Database() directly - please use firebase.database().");this.ta=a;this.ba=new R(a,D);this.INTERNAL=new Kd(this)}var Ld={TIMESTAMP:{".sv":"timestamp"}};g=Id.prototype;g.app=null;g.jf=function(a){Md(this,"ref");y("database.ref",0,1,arguments.length);return n(a)?this.ba.n(a):this.ba};
g.gg=function(a){Md(this,"database.refFromURL");y("database.refFromURL",1,1,arguments.length);var b=tc(a);Nd("database.refFromURL",b);var c=b.jc;c.host!==this.ta.L.host&&sc("database.refFromURL: Host name does not match the current database: (found "+c.host+" but expected "+this.ta.L.host+")");return this.jf(b.path.toString())};function Md(a,b){null===a.ta&&sc("Cannot call "+b+" on a deleted database.")}g.Pf=function(){y("database.goOffline",0,0,arguments.length);Md(this,"goOffline");this.ta.ab()};
g.Qf=function(){y("database.goOnline",0,0,arguments.length);Md(this,"goOnline");this.ta.kc()};Object.defineProperty(Id.prototype,"app",{get:function(){return this.ta.app}});function Kd(a){this.Ya=a}Kd.prototype.delete=function(){Md(this.Ya,"delete");var a=Od.Vb(),b=this.Ya.ta;x(a.lb,b.app.name)!==b&&sc("Database "+b.app.name+" has already been deleted.");b.ab();delete a.lb[b.app.name];this.Ya.ta=null;this.Ya.ba=null;this.Ya=this.Ya.INTERNAL=null;return firebase.Promise.resolve()};
Id.prototype.ref=Id.prototype.jf;Id.prototype.refFromURL=Id.prototype.gg;Id.prototype.goOnline=Id.prototype.Qf;Id.prototype.goOffline=Id.prototype.Pf;Kd.prototype["delete"]=Kd.prototype.delete;function Qb(){this.k=this.B=null}Qb.prototype.find=function(a){if(null!=this.B)return this.B.P(a);if(a.e()||null==this.k)return null;var b=O(a);a=E(a);return this.k.contains(b)?this.k.get(b).find(a):null};function Sb(a,b,c){if(b.e())a.B=c,a.k=null;else if(null!==a.B)a.B=a.B.F(b,c);else{null==a.k&&(a.k=new yd);var d=O(b);a.k.contains(d)||a.k.add(d,new Qb);a=a.k.get(d);b=E(b);Sb(a,b,c)}}
function Pd(a,b){if(b.e())return a.B=null,a.k=null,!0;if(null!==a.B){if(a.B.J())return!1;var c=a.B;a.B=null;c.O(L,function(b,c){Sb(a,new J(b),c)});return Pd(a,b)}return null!==a.k?(c=O(b),b=E(b),a.k.contains(c)&&Pd(a.k.get(c),b)&&a.k.remove(c),a.k.e()?(a.k=null,!0):!1):!0}function Rb(a,b,c){null!==a.B?c(b,a.B):a.O(function(a,e){var f=new J(b.toString()+"/"+a);Rb(e,f,c)})}Qb.prototype.O=function(a){null!==this.k&&zd(this.k,function(b,c){a(b,c)})};function Qd(a,b){this.value=a;this.children=b||Rd}var Rd=new Vb(function(a,b){return a===b?0:a<b?-1:1});function Sd(a){var b=S;r(a,function(a,d){b=b.set(new J(d),a)});return b}g=Qd.prototype;g.e=function(){return null===this.value&&this.children.e()};function Td(a,b,c){if(null!=a.value&&c(a.value))return{path:D,value:a.value};if(b.e())return null;var d=O(b);a=a.children.get(d);return null!==a?(b=Td(a,E(b),c),null!=b?{path:(new J(d)).n(b.path),value:b.value}:null):null}
function Ud(a,b){return Td(a,b,function(){return!0})}g.subtree=function(a){if(a.e())return this;var b=this.children.get(O(a));return null!==b?b.subtree(E(a)):S};g.set=function(a,b){if(a.e())return new Qd(b,this.children);var c=O(a),d=(this.children.get(c)||S).set(E(a),b),c=this.children.Oa(c,d);return new Qd(this.value,c)};
g.remove=function(a){if(a.e())return this.children.e()?S:new Qd(null,this.children);var b=O(a),c=this.children.get(b);return c?(a=c.remove(E(a)),b=a.e()?this.children.remove(b):this.children.Oa(b,a),null===this.value&&b.e()?S:new Qd(this.value,b)):this};g.get=function(a){if(a.e())return this.value;var b=this.children.get(O(a));return b?b.get(E(a)):null};
function Vd(a,b,c){if(b.e())return c;var d=O(b);b=Vd(a.children.get(d)||S,E(b),c);d=b.e()?a.children.remove(d):a.children.Oa(d,b);return new Qd(a.value,d)}function Wd(a,b){return Xd(a,D,b)}function Xd(a,b,c){var d={};a.children.ha(function(a,f){d[a]=Xd(f,b.n(a),c)});return c(b,a.value,d)}function Yd(a,b,c){return Zd(a,b,D,c)}function Zd(a,b,c,d){var e=a.value?d(c,a.value):!1;if(e)return e;if(b.e())return null;e=O(b);return(a=a.children.get(e))?Zd(a,E(b),c.n(e),d):null}
function $d(a,b,c){ae(a,b,D,c)}function ae(a,b,c,d){if(b.e())return a;a.value&&d(c,a.value);var e=O(b);return(a=a.children.get(e))?ae(a,E(b),c.n(e),d):S}function be(a,b){ce(a,D,b)}function ce(a,b,c){a.children.ha(function(a,e){ce(e,b.n(a),c)});a.value&&c(b,a.value)}function de(a,b){a.children.ha(function(a,d){d.value&&b(a,d.value)})}var S=new Qd(null);Qd.prototype.toString=function(){var a={};be(this,function(b,c){a[b.toString()]=c.toString()});return w(a)};function ee(a){this.W=a}var fe=new ee(new Qd(null));function ge(a,b,c){if(b.e())return new ee(new Qd(c));var d=Ud(a.W,b);if(null!=d){var e=d.path,d=d.value;b=Q(e,b);d=d.F(b,c);return new ee(a.W.set(e,d))}a=Vd(a.W,b,new Qd(c));return new ee(a)}function he(a,b,c){var d=a;gb(c,function(a,c){d=ge(d,b.n(a),c)});return d}ee.prototype.Ed=function(a){if(a.e())return fe;a=Vd(this.W,a,S);return new ee(a)};function ie(a,b){var c=Ud(a.W,b);return null!=c?a.W.get(c.path).P(Q(c.path,b)):null}
function je(a){var b=[],c=a.W.value;null!=c?c.J()||c.O(L,function(a,c){b.push(new G(a,c))}):a.W.children.ha(function(a,c){null!=c.value&&b.push(new G(a,c.value))});return b}function ke(a,b){if(b.e())return a;var c=ie(a,b);return null!=c?new ee(new Qd(c)):new ee(a.W.subtree(b))}ee.prototype.e=function(){return this.W.e()};ee.prototype.apply=function(a){return le(D,this.W,a)};
function le(a,b,c){if(null!=b.value)return c.F(a,b.value);var d=null;b.children.ha(function(b,f){".priority"===b?(I(null!==f.value,"Priority writes must always be leaf nodes"),d=f.value):c=le(a.n(b),f,c)});c.P(a).e()||null===d||(c=c.F(a.n(".priority"),d));return c};function me(a,b,c){this.type=ne;this.source=oe;this.path=a;this.Ob=b;this.Id=c}me.prototype.Mc=function(a){if(this.path.e()){if(null!=this.Ob.value)return I(this.Ob.children.e(),"affectedTree should not have overlapping affected paths."),this;a=this.Ob.subtree(new J(a));return new me(D,a,this.Id)}I(O(this.path)===a,"operationForChild called for unrelated child.");return new me(E(this.path),this.Ob,this.Id)};
me.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" ack write revert="+this.Id+" affectedTree="+this.Ob+")"};var vb=0,Kc=1,ne=2,tb=3;function pe(a,b,c,d){this.ee=a;this.Se=b;this.Hb=c;this.Ee=d;I(!d||b,"Tagged queries must be from server.")}var oe=new pe(!0,!1,null,!1),qe=new pe(!1,!0,null,!1);pe.prototype.toString=function(){return this.ee?"user":this.Ee?"server(queryID="+this.Hb+")":"server"};function re(){this.children={};this.bd=0;this.value=null}function se(a,b,c){this.ud=a?a:"";this.Pc=b?b:null;this.A=c?c:new re}function te(a,b){for(var c=b instanceof J?b:new J(b),d=a,e;null!==(e=O(c));)d=new se(e,d,x(d.A.children,e)||new re),c=E(c);return d}g=se.prototype;g.Ca=function(){return this.A.value};function ue(a,b){I("undefined"!==typeof b,"Cannot set value to undefined");a.A.value=b;ve(a)}g.clear=function(){this.A.value=null;this.A.children={};this.A.bd=0;ve(this)};
g.kd=function(){return 0<this.A.bd};g.e=function(){return null===this.Ca()&&!this.kd()};g.O=function(a){var b=this;r(this.A.children,function(c,d){a(new se(d,b,c))})};function we(a,b,c,d){c&&!d&&b(a);a.O(function(a){we(a,b,!0,d)});c&&d&&b(a)}function xe(a,b){for(var c=a.parent();null!==c&&!b(c);)c=c.parent()}g.path=function(){return new J(null===this.Pc?this.ud:this.Pc.path()+"/"+this.ud)};g.name=function(){return this.ud};g.parent=function(){return this.Pc};
function ve(a){if(null!==a.Pc){var b=a.Pc,c=a.ud,d=a.e(),e=fb(b.A.children,c);d&&e?(delete b.A.children[c],b.A.bd--,ve(b)):d||e||(b.A.children[c]=a.A,b.A.bd++,ve(b))}};var ye=/[\[\].#$\/\u0000-\u001F\u007F]/,ze=/[\[\].#$\u0000-\u001F\u007F]/;function Ae(a){return p(a)&&0!==a.length&&!ye.test(a)}function Be(a){return null===a||p(a)||ga(a)&&!uc(a)||ia(a)&&fb(a,".sv")}function Ce(a,b,c,d){d&&!n(b)||De(A(a,1,d),b,c)}
function De(a,b,c){c instanceof J&&(c=new Fd(c,a));if(!n(b))throw Error(a+"contains undefined "+Hd(c));if(ha(b))throw Error(a+"contains a function "+Hd(c)+" with contents: "+b.toString());if(uc(b))throw Error(a+"contains "+b.toString()+" "+Hd(c));if(p(b)&&b.length>10485760/3&&10485760<mb(b))throw Error(a+"contains a string greater than 10485760 utf8 bytes "+Hd(c)+" ('"+b.substring(0,50)+"...')");if(ia(b)){var d=!1,e=!1;gb(b,function(b,h){if(".value"===b)d=!0;else if(".priority"!==b&&".sv"!==b&&(e=
!0,!Ae(b)))throw Error(a+" contains an invalid key ("+b+") "+Hd(c)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');c.push(b);De(a,h,c);c.pop()});if(d&&e)throw Error(a+' contains ".value" child '+Hd(c)+" in addition to actual children.");}}
function Ee(a,b){var c,d;for(c=0;c<b.length;c++){d=b[c];for(var e=d.slice(),f=0;f<e.length;f++)if((".priority"!==e[f]||f!==e.length-1)&&!Ae(e[f]))throw Error(a+"contains an invalid key ("+e[f]+") in path "+d.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');}b.sort(Dd);e=null;for(c=0;c<b.length;c++){d=b[c];if(null!==e&&e.contains(d))throw Error(a+"contains a path "+e.toString()+" that is ancestor of another path "+d.toString());e=d}}
function Fe(a,b,c){var d=A(a,1,!1);if(!ia(b)||ea(b))throw Error(d+" must be an object containing the children to replace.");var e=[];gb(b,function(a,b){var k=new J(a);De(d,b,c.n(k));if(".priority"===Ed(k)&&!Be(b))throw Error(d+"contains an invalid value for '"+k.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");e.push(k)});Ee(d,e)}
function Ge(a,b,c){if(uc(c))throw Error(A(a,b,!1)+"is "+c.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Be(c))throw Error(A(a,b,!1)+"must be a valid Firebase priority (a string, finite number, server value, or null).");}
function He(a,b,c){if(!c||n(b))switch(b){case "value":case "child_added":case "child_removed":case "child_changed":case "child_moved":break;default:throw Error(A(a,1,c)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".');}}function Ie(a,b){if(n(b)&&!Ae(b))throw Error(A(a,2,!0)+'was an invalid key: "'+b+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").');}
function Je(a,b){if(!p(b)||0===b.length||ze.test(b))throw Error(A(a,1,!1)+'was an invalid path: "'+b+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"');}function Ke(a,b){if(".info"===O(b))throw Error(a+" failed: Can't modify data under /.info/");}
function Nd(a,b){var c=b.path.toString(),d;!(d=!p(b.jc.host)||0===b.jc.host.length||!Ae(b.jc.pe))&&(d=0!==c.length)&&(c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),d=!(p(c)&&0!==c.length&&!ze.test(c)));if(d)throw Error(A(a,1,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".');};function T(a,b,c){this.A=a;this.V=b;this.g=c}T.prototype.H=function(){y("Firebase.DataSnapshot.val",0,0,arguments.length);return this.A.H()};T.prototype.val=T.prototype.H;T.prototype.be=function(){y("Firebase.DataSnapshot.exportVal",0,0,arguments.length);return this.A.H(!0)};T.prototype.exportVal=T.prototype.be;T.prototype.toJSON=function(){y("Firebase.DataSnapshot.toJSON",0,1,arguments.length);return this.be()};T.prototype.toJSON=T.prototype.toJSON;
T.prototype.Lf=function(){y("Firebase.DataSnapshot.exists",0,0,arguments.length);return!this.A.e()};T.prototype.exists=T.prototype.Lf;T.prototype.n=function(a){y("Firebase.DataSnapshot.child",0,1,arguments.length);ga(a)&&(a=String(a));Je("Firebase.DataSnapshot.child",a);var b=new J(a),c=this.V.n(b);return new T(this.A.P(b),c,L)};T.prototype.child=T.prototype.n;
T.prototype.Da=function(a){y("Firebase.DataSnapshot.hasChild",1,1,arguments.length);Je("Firebase.DataSnapshot.hasChild",a);var b=new J(a);return!this.A.P(b).e()};T.prototype.hasChild=T.prototype.Da;T.prototype.C=function(){y("Firebase.DataSnapshot.getPriority",0,0,arguments.length);return this.A.C().H()};T.prototype.getPriority=T.prototype.C;
T.prototype.forEach=function(a){y("Firebase.DataSnapshot.forEach",1,1,arguments.length);B("Firebase.DataSnapshot.forEach",1,a,!1);if(this.A.J())return!1;var b=this;return!!this.A.O(this.g,function(c,d){return a(new T(d,b.V.n(c),L))})};T.prototype.forEach=T.prototype.forEach;T.prototype.kd=function(){y("Firebase.DataSnapshot.hasChildren",0,0,arguments.length);return this.A.J()?!1:!this.A.e()};T.prototype.hasChildren=T.prototype.kd;
T.prototype.getKey=function(){y("Firebase.DataSnapshot.key",0,0,arguments.length);return this.V.getKey()};Ec(T.prototype,"key",T.prototype.getKey);T.prototype.Eb=function(){y("Firebase.DataSnapshot.numChildren",0,0,arguments.length);return this.A.Eb()};T.prototype.numChildren=T.prototype.Eb;T.prototype.wb=function(){y("Firebase.DataSnapshot.ref",0,0,arguments.length);return this.V};Ec(T.prototype,"ref",T.prototype.wb);function U(a,b){this.ta=a;this.qa=b}U.prototype.cancel=function(a){y("Firebase.onDisconnect().cancel",0,1,arguments.length);B("Firebase.onDisconnect().cancel",1,a,!0);var b=new ib;this.ta.xd(this.qa,jb(b,a));return b.ra};U.prototype.cancel=U.prototype.cancel;U.prototype.remove=function(a){y("Firebase.onDisconnect().remove",0,1,arguments.length);Ke("Firebase.onDisconnect().remove",this.qa);B("Firebase.onDisconnect().remove",1,a,!0);var b=new ib;Le(this.ta,this.qa,null,jb(b,a));return b.ra};
U.prototype.remove=U.prototype.remove;U.prototype.set=function(a,b){y("Firebase.onDisconnect().set",1,2,arguments.length);Ke("Firebase.onDisconnect().set",this.qa);Ce("Firebase.onDisconnect().set",a,this.qa,!1);B("Firebase.onDisconnect().set",2,b,!0);var c=new ib;Le(this.ta,this.qa,a,jb(c,b));return c.ra};U.prototype.set=U.prototype.set;
U.prototype.Jb=function(a,b,c){y("Firebase.onDisconnect().setWithPriority",2,3,arguments.length);Ke("Firebase.onDisconnect().setWithPriority",this.qa);Ce("Firebase.onDisconnect().setWithPriority",a,this.qa,!1);Ge("Firebase.onDisconnect().setWithPriority",2,b);B("Firebase.onDisconnect().setWithPriority",3,c,!0);var d=new ib;Me(this.ta,this.qa,a,b,jb(d,c));return d.ra};U.prototype.setWithPriority=U.prototype.Jb;
U.prototype.update=function(a,b){y("Firebase.onDisconnect().update",1,2,arguments.length);Ke("Firebase.onDisconnect().update",this.qa);if(ea(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c;N("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fe("Firebase.onDisconnect().update",a,this.qa);B("Firebase.onDisconnect().update",2,b,!0);
c=new ib;Ne(this.ta,this.qa,a,jb(c,b));return c.ra};U.prototype.update=U.prototype.update;function Oe(){Ad.call(this,["visible"]);var a,b;"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(b="visibilitychange",a="hidden"):"undefined"!==typeof document.mozHidden?(b="mozvisibilitychange",a="mozHidden"):"undefined"!==typeof document.msHidden?(b="msvisibilitychange",a="msHidden"):"undefined"!==typeof document.webkitHidden&&(b="webkitvisibilitychange",a="webkitHidden"));this.Mb=!0;if(b){var c=this;document.addEventListener(b,
function(){var b=!document[a];b!==c.Mb&&(c.Mb=b,c.Ge("visible",b))},!1)}}la(Oe,Ad);Oe.prototype.Ue=function(a){I("visible"===a,"Unknown event type: "+a);return[this.Mb]};ca(Oe);function Pe(a,b,c){this.A=a;this.da=b;this.Sb=c}function Qe(a){return a.da}function Re(a){return a.Sb}function Se(a,b){return b.e()?a.da&&!a.Sb:Te(a,O(b))}function Te(a,b){return a.da&&!a.Sb||a.A.Da(b)}Pe.prototype.j=function(){return this.A};function V(a,b,c,d){this.type=a;this.Ja=b;this.Xa=c;this.qe=d;this.Dd=void 0}function Ue(a){return new V(Ve,a)}var Ve="value";function We(){this.fb={}}
function Xe(a,b){var c=b.type,d=b.Xa;I("child_added"==c||"child_changed"==c||"child_removed"==c,"Only child changes supported for tracking");I(".priority"!==d,"Only non-priority child changes can be tracked.");var e=x(a.fb,d);if(e){var f=e.type;if("child_added"==c&&"child_removed"==f)a.fb[d]=new V("child_changed",b.Ja,d,e.Ja);else if("child_removed"==c&&"child_added"==f)delete a.fb[d];else if("child_removed"==c&&"child_changed"==f)a.fb[d]=new V("child_removed",e.qe,d);else if("child_changed"==c&&
"child_added"==f)a.fb[d]=new V("child_added",b.Ja,d);else if("child_changed"==c&&"child_changed"==f)a.fb[d]=new V("child_changed",b.Ja,d,e.qe);else throw jc("Illegal combination of changes: "+b+" occurred after "+e);}else a.fb[d]=b};function Ye(){}Ye.prototype.Te=function(){return null};Ye.prototype.fe=function(){return null};var Ze=new Ye;function $e(a,b,c){this.xf=a;this.Ka=b;this.yd=c}$e.prototype.Te=function(a){var b=this.Ka.N;if(Te(b,a))return b.j().Q(a);b=null!=this.yd?new Pe(this.yd,!0,!1):this.Ka.w();return this.xf.qc(a,b)};$e.prototype.fe=function(a,b,c){var d=null!=this.yd?this.yd:af(this.Ka);a=this.xf.Xd(d,b,1,c,a);return 0===a.length?null:a[0]};function bf(a,b,c,d){this.ae=b;this.Md=c;this.Dd=d;this.hd=a}bf.prototype.Yb=function(){var a=this.Md.wb();return"value"===this.hd?a.path:a.getParent().path};bf.prototype.ge=function(){return this.hd};bf.prototype.Tb=function(){return this.ae.Tb(this)};bf.prototype.toString=function(){return this.Yb().toString()+":"+this.hd+":"+w(this.Md.be())};function cf(a,b,c){this.ae=a;this.error=b;this.path=c}cf.prototype.Yb=function(){return this.path};cf.prototype.ge=function(){return"cancel"};
cf.prototype.Tb=function(){return this.ae.Tb(this)};cf.prototype.toString=function(){return this.path.toString()+":cancel"};function df(a){this.V=a;this.g=a.m.g}function ef(a,b,c,d){var e=[],f=[];Ha(b,function(b){"child_changed"===b.type&&a.g.nd(b.qe,b.Ja)&&f.push(new V("child_moved",b.Ja,b.Xa))});ff(a,e,"child_removed",b,d,c);ff(a,e,"child_added",b,d,c);ff(a,e,"child_moved",f,d,c);ff(a,e,"child_changed",b,d,c);ff(a,e,Ve,b,d,c);return e}function ff(a,b,c,d,e,f){d=Ia(d,function(a){return a.type===c});Qa(d,q(a.Ff,a));Ha(d,function(c){var d=gf(a,c,f);Ha(e,function(e){e.nf(c.type)&&b.push(e.createEvent(d,a.V))})})}
function gf(a,b,c){"value"!==b.type&&"child_removed"!==b.type&&(b.Dd=c.Ve(b.Xa,b.Ja,a.g));return b}df.prototype.Ff=function(a,b){if(null==a.Xa||null==b.Xa)throw jc("Should only compare child_ events.");return this.g.compare(new G(a.Xa,a.Ja),new G(b.Xa,b.Ja))};function hf(){this.vb=[]}function jf(a,b){for(var c=null,d=0;d<b.length;d++){var e=b[d],f=e.Yb();null===c||f.Z(c.Yb())||(a.vb.push(c),c=null);null===c&&(c=new kf(f));c.add(e)}c&&a.vb.push(c)}function lf(a,b,c){jf(a,c);mf(a,function(a){return a.Z(b)})}function nf(a,b,c){jf(a,c);mf(a,function(a){return a.contains(b)||b.contains(a)})}
function mf(a,b){for(var c=!0,d=0;d<a.vb.length;d++){var e=a.vb[d];if(e)if(e=e.Yb(),b(e)){for(var e=a.vb[d],f=0;f<e.jd.length;f++){var h=e.jd[f];if(null!==h){e.jd[f]=null;var k=h.Tb();nc&&C("event: "+h.toString());Dc(k)}}a.vb[d]=null}else c=!1}c&&(a.vb=[])}function kf(a){this.qa=a;this.jd=[]}kf.prototype.add=function(a){this.jd.push(a)};kf.prototype.Yb=function(){return this.qa};function of(a,b,c){this.Pb=a;this.rb=b;this.tb=c||null}g=of.prototype;g.nf=function(a){return"value"===a};g.createEvent=function(a,b){var c=b.m.g;return new bf("value",this,new T(a.Ja,b.wb(),c))};g.Tb=function(a){var b=this.tb;if("cancel"===a.ge()){I(this.rb,"Raising a cancel event on a listener with no cancel callback");var c=this.rb;return function(){c.call(b,a.error)}}var d=this.Pb;return function(){d.call(b,a.Md)}};g.Me=function(a,b){return this.rb?new cf(this,a,b):null};
g.matches=function(a){return a instanceof of?a.Pb&&this.Pb?a.Pb===this.Pb&&a.tb===this.tb:!0:!1};g.Xe=function(){return null!==this.Pb};function pf(a,b,c){this.ga=a;this.rb=b;this.tb=c}g=pf.prototype;g.nf=function(a){a="children_added"===a?"child_added":a;return("children_removed"===a?"child_removed":a)in this.ga};g.Me=function(a,b){return this.rb?new cf(this,a,b):null};
g.createEvent=function(a,b){I(null!=a.Xa,"Child events should have a childName.");var c=b.wb().n(a.Xa);return new bf(a.type,this,new T(a.Ja,c,b.m.g),a.Dd)};g.Tb=function(a){var b=this.tb;if("cancel"===a.ge()){I(this.rb,"Raising a cancel event on a listener with no cancel callback");var c=this.rb;return function(){c.call(b,a.error)}}var d=this.ga[a.hd];return function(){d.call(b,a.Md,a.Dd)}};
g.matches=function(a){if(a instanceof pf){if(!this.ga||!a.ga)return!0;if(this.tb===a.tb){var b=xa(a.ga);if(b===xa(this.ga)){if(1===b){var b=ya(a.ga),c=ya(this.ga);return c===b&&(!a.ga[b]||!this.ga[c]||a.ga[b]===this.ga[c])}return wa(this.ga,function(b,c){return a.ga[c]===b})}}}return!1};g.Xe=function(){return null!==this.ga};function W(a,b,c,d){this.u=a;this.path=b;this.m=c;this.Nc=d}
function qf(a){var b=null,c=null;a.ka&&(b=rf(a));a.na&&(c=sf(a));if(a.g===Yc){if(a.ka){if("[MIN_NAME]"!=tf(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==typeof b)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");}if(a.na){if("[MAX_NAME]"!=uf(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==
typeof c)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");}}else if(a.g===L){if(null!=b&&!Be(b)||null!=c&&!Be(c))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).");}else if(I(a.g instanceof Uc||a.g===ad,"unknown index type."),null!=b&&"object"===typeof b||null!=c&&"object"===typeof c)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.");
}function vf(a){if(a.ka&&a.na&&a.xa&&(!a.xa||""===a.mb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.");}function wf(a,b){if(!0===a.Nc)throw Error(b+": You can't combine multiple orderBy calls.");}g=W.prototype;g.wb=function(){y("Query.ref",0,0,arguments.length);return new R(this.u,this.path)};
g.gc=function(a,b,c,d){y("Query.on",2,4,arguments.length);He("Query.on",a,!1);B("Query.on",2,b,!1);var e=xf("Query.on",c,d);if("value"===a)yf(this.u,this,new of(b,e.cancel||null,e.Ma||null));else{var f={};f[a]=b;yf(this.u,this,new pf(f,e.cancel,e.Ma))}return b};
g.Ic=function(a,b,c){y("Query.off",0,3,arguments.length);He("Query.off",a,!0);B("Query.off",2,b,!0);ob("Query.off",3,c);var d=null,e=null;"value"===a?d=new of(b||null,null,c||null):a&&(b&&(e={},e[a]=b),d=new pf(e,null,c||null));e=this.u;d=".info"===O(this.path)?e.pd.kb(this,d):e.K.kb(this,d);lf(e.ca,this.path,d)};
g.$f=function(a,b){function c(k){f&&(f=!1,e.Ic(a,c),b&&b.call(d.Ma,k),h.resolve(k))}y("Query.once",1,4,arguments.length);He("Query.once",a,!1);B("Query.once",2,b,!0);var d=xf("Query.once",arguments[2],arguments[3]),e=this,f=!0,h=new ib;kb(h.ra);this.gc(a,c,function(b){e.Ic(a,c);d.cancel&&d.cancel.call(d.Ma,b);h.reject(b)});return h.ra};
g.ne=function(a){y("Query.limitToFirst",1,1,arguments.length);if(!ga(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.m.xa)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new W(this.u,this.path,this.m.ne(a),this.Nc)};
g.oe=function(a){y("Query.limitToLast",1,1,arguments.length);if(!ga(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.m.xa)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new W(this.u,this.path,this.m.oe(a),this.Nc)};
g.ag=function(a){y("Query.orderByChild",1,1,arguments.length);if("$key"===a)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===a)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===a)throw Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Je("Query.orderByChild",a);wf(this,"Query.orderByChild");var b=new J(a);if(b.e())throw Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");
b=new Uc(b);b=zf(this.m,b);qf(b);return new W(this.u,this.path,b,!0)};g.bg=function(){y("Query.orderByKey",0,0,arguments.length);wf(this,"Query.orderByKey");var a=zf(this.m,Yc);qf(a);return new W(this.u,this.path,a,!0)};g.cg=function(){y("Query.orderByPriority",0,0,arguments.length);wf(this,"Query.orderByPriority");var a=zf(this.m,L);qf(a);return new W(this.u,this.path,a,!0)};
g.dg=function(){y("Query.orderByValue",0,0,arguments.length);wf(this,"Query.orderByValue");var a=zf(this.m,ad);qf(a);return new W(this.u,this.path,a,!0)};g.Nd=function(a,b){y("Query.startAt",0,2,arguments.length);Ce("Query.startAt",a,this.path,!0);Ie("Query.startAt",b);var c=this.m.Nd(a,b);vf(c);qf(c);if(this.m.ka)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");n(a)||(b=a=null);return new W(this.u,this.path,c,this.Nc)};
g.gd=function(a,b){y("Query.endAt",0,2,arguments.length);Ce("Query.endAt",a,this.path,!0);Ie("Query.endAt",b);var c=this.m.gd(a,b);vf(c);qf(c);if(this.m.na)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new W(this.u,this.path,c,this.Nc)};
g.If=function(a,b){y("Query.equalTo",1,2,arguments.length);Ce("Query.equalTo",a,this.path,!1);Ie("Query.equalTo",b);if(this.m.ka)throw Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.m.na)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.Nd(a,b).gd(a,b)};
g.toString=function(){y("Query.toString",0,0,arguments.length);for(var a=this.path,b="",c=a.Y;c<a.o.length;c++)""!==a.o[c]&&(b+="/"+encodeURIComponent(String(a.o[c])));return this.u.toString()+(b||"/")};g.toJSON=function(){y("Query.toJSON",0,1,arguments.length);return this.toString()};g.ja=function(){var a=yc(Af(this.m));return"{}"===a?"default":a};
g.isEqual=function(a){y("Query.isEqual",1,1,arguments.length);if(!(a instanceof W))throw Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var b=this.u===a.u,c=this.path.Z(a.path),d=this.ja()===a.ja();return b&&c&&d};
function xf(a,b,c){var d={cancel:null,Ma:null};if(b&&c)d.cancel=b,B(a,3,d.cancel,!0),d.Ma=c,ob(a,4,d.Ma);else if(b)if("object"===typeof b&&null!==b)d.Ma=b;else if("function"===typeof b)d.cancel=b;else throw Error(A(a,3,!0)+" must either be a cancel callback or a context object.");return d}W.prototype.on=W.prototype.gc;W.prototype.off=W.prototype.Ic;W.prototype.once=W.prototype.$f;W.prototype.limitToFirst=W.prototype.ne;W.prototype.limitToLast=W.prototype.oe;W.prototype.orderByChild=W.prototype.ag;
W.prototype.orderByKey=W.prototype.bg;W.prototype.orderByPriority=W.prototype.cg;W.prototype.orderByValue=W.prototype.dg;W.prototype.startAt=W.prototype.Nd;W.prototype.endAt=W.prototype.gd;W.prototype.equalTo=W.prototype.If;W.prototype.toString=W.prototype.toString;W.prototype.isEqual=W.prototype.isEqual;Ec(W.prototype,"ref",W.prototype.wb);function Bf(a){this.g=a}g=Bf.prototype;g.F=function(a,b,c,d,e,f){I(a.yc(this.g),"A node must be indexed if only a child is updated");e=a.Q(b);if(e.P(d).Z(c.P(d))&&e.e()==c.e())return a;null!=f&&(c.e()?a.Da(b)?Xe(f,new V("child_removed",e,b)):I(a.J(),"A child remove without an old child only makes sense on a leaf node"):e.e()?Xe(f,new V("child_added",c,b)):Xe(f,new V("child_changed",c,b,e)));return a.J()&&c.e()?a:a.T(b,c).nb(this.g)};
g.ya=function(a,b,c){null!=c&&(a.J()||a.O(L,function(a,e){b.Da(a)||Xe(c,new V("child_removed",e,a))}),b.J()||b.O(L,function(b,e){if(a.Da(b)){var f=a.Q(b);f.Z(e)||Xe(c,new V("child_changed",e,b,f))}else Xe(c,new V("child_added",e,b))}));return b.nb(this.g)};g.fa=function(a,b){return a.e()?H:a.fa(b)};g.Na=function(){return!1};g.Ub=function(){return this};function Cf(a){this.he=new Bf(a.g);this.g=a.g;var b;a.ka?(b=tf(a),b=a.g.Ec(rf(a),b)):b=a.g.Hc();this.Uc=b;a.na?(b=uf(a),a=a.g.Ec(sf(a),b)):a=a.g.Fc();this.vc=a}g=Cf.prototype;g.matches=function(a){return 0>=this.g.compare(this.Uc,a)&&0>=this.g.compare(a,this.vc)};g.F=function(a,b,c,d,e,f){this.matches(new G(b,c))||(c=H);return this.he.F(a,b,c,d,e,f)};
g.ya=function(a,b,c){b.J()&&(b=H);var d=b.nb(this.g),d=d.fa(H),e=this;b.O(L,function(a,b){e.matches(new G(a,b))||(d=d.T(a,H))});return this.he.ya(a,d,c)};g.fa=function(a){return a};g.Na=function(){return!0};g.Ub=function(){return this.he};function Df(a){this.sa=new Cf(a);this.g=a.g;I(a.xa,"Only valid if limit has been set");this.oa=a.oa;this.Ib=!Ef(a)}g=Df.prototype;g.F=function(a,b,c,d,e,f){this.sa.matches(new G(b,c))||(c=H);return a.Q(b).Z(c)?a:a.Eb()<this.oa?this.sa.Ub().F(a,b,c,d,e,f):Ff(this,a,b,c,e,f)};
g.ya=function(a,b,c){var d;if(b.J()||b.e())d=H.nb(this.g);else if(2*this.oa<b.Eb()&&b.yc(this.g)){d=H.nb(this.g);b=this.Ib?b.Zb(this.sa.vc,this.g):b.Xb(this.sa.Uc,this.g);for(var e=0;0<b.Pa.length&&e<this.oa;){var f=M(b),h;if(h=this.Ib?0>=this.g.compare(this.sa.Uc,f):0>=this.g.compare(f,this.sa.vc))d=d.T(f.name,f.R),e++;else break}}else{d=b.nb(this.g);d=d.fa(H);var k,m,l;if(this.Ib){b=d.We(this.g);k=this.sa.vc;m=this.sa.Uc;var u=Sc(this.g);l=function(a,b){return u(b,a)}}else b=d.Wb(this.g),k=this.sa.Uc,
m=this.sa.vc,l=Sc(this.g);for(var e=0,z=!1;0<b.Pa.length;)f=M(b),!z&&0>=l(k,f)&&(z=!0),(h=z&&e<this.oa&&0>=l(f,m))?e++:d=d.T(f.name,H)}return this.sa.Ub().ya(a,d,c)};g.fa=function(a){return a};g.Na=function(){return!0};g.Ub=function(){return this.sa.Ub()};
function Ff(a,b,c,d,e,f){var h;if(a.Ib){var k=Sc(a.g);h=function(a,b){return k(b,a)}}else h=Sc(a.g);I(b.Eb()==a.oa,"");var m=new G(c,d),l=a.Ib?nd(b,a.g):od(b,a.g),u=a.sa.matches(m);if(b.Da(c)){for(var z=b.Q(c),l=e.fe(a.g,l,a.Ib);null!=l&&(l.name==c||b.Da(l.name));)l=e.fe(a.g,l,a.Ib);e=null==l?1:h(l,m);if(u&&!d.e()&&0<=e)return null!=f&&Xe(f,new V("child_changed",d,c,z)),b.T(c,d);null!=f&&Xe(f,new V("child_removed",z,c));b=b.T(c,H);return null!=l&&a.sa.matches(l)?(null!=f&&Xe(f,new V("child_added",
l.R,l.name)),b.T(l.name,l.R)):b}return d.e()?b:u&&0<=h(l,m)?(null!=f&&(Xe(f,new V("child_removed",l.R,l.name)),Xe(f,new V("child_added",d,c))),b.T(c,d).T(l.name,H)):b};function Gf(){this.Rb=this.na=this.Kb=this.ka=this.xa=!1;this.oa=0;this.mb="";this.dc=null;this.zb="";this.ac=null;this.xb="";this.g=L}var Hf=new Gf;function Ef(a){return""===a.mb?a.ka:"l"===a.mb}function rf(a){I(a.ka,"Only valid if start has been set");return a.dc}function tf(a){I(a.ka,"Only valid if start has been set");return a.Kb?a.zb:"[MIN_NAME]"}function sf(a){I(a.na,"Only valid if end has been set");return a.ac}
function uf(a){I(a.na,"Only valid if end has been set");return a.Rb?a.xb:"[MAX_NAME]"}function If(a){var b=new Gf;b.xa=a.xa;b.oa=a.oa;b.ka=a.ka;b.dc=a.dc;b.Kb=a.Kb;b.zb=a.zb;b.na=a.na;b.ac=a.ac;b.Rb=a.Rb;b.xb=a.xb;b.g=a.g;b.mb=a.mb;return b}g=Gf.prototype;g.ne=function(a){var b=If(this);b.xa=!0;b.oa=a;b.mb="l";return b};g.oe=function(a){var b=If(this);b.xa=!0;b.oa=a;b.mb="r";return b};g.Nd=function(a,b){var c=If(this);c.ka=!0;n(a)||(a=null);c.dc=a;null!=b?(c.Kb=!0,c.zb=b):(c.Kb=!1,c.zb="");return c};
g.gd=function(a,b){var c=If(this);c.na=!0;n(a)||(a=null);c.ac=a;n(b)?(c.Rb=!0,c.xb=b):(c.vg=!1,c.xb="");return c};function zf(a,b){var c=If(a);c.g=b;return c}function Af(a){var b={};a.ka&&(b.sp=a.dc,a.Kb&&(b.sn=a.zb));a.na&&(b.ep=a.ac,a.Rb&&(b.en=a.xb));if(a.xa){b.l=a.oa;var c=a.mb;""===c&&(c=Ef(a)?"l":"r");b.vf=c}a.g!==L&&(b.i=a.g.toString());return b}function X(a){return!(a.ka||a.na||a.xa)}function Nc(a){return X(a)&&a.g==L}
function Oc(a){var b={};if(Nc(a))return b;var c;a.g===L?c="$priority":a.g===ad?c="$value":a.g===Yc?c="$key":(I(a.g instanceof Uc,"Unrecognized index type!"),c=a.g.toString());b.orderBy=w(c);a.ka&&(b.startAt=w(a.dc),a.Kb&&(b.startAt+=","+w(a.zb)));a.na&&(b.endAt=w(a.ac),a.Rb&&(b.endAt+=","+w(a.xb)));a.xa&&(Ef(a)?b.limitToFirst=a.oa:b.limitToLast=a.oa);return b}g.toString=function(){return w(Af(this))};function Jf(a,b){this.N=a;this.Ld=b}function Kf(a,b,c,d){return new Jf(new Pe(b,c,d),a.Ld)}function Lf(a){return a.N.da?a.N.j():null}Jf.prototype.w=function(){return this.Ld};function af(a){return a.Ld.da?a.Ld.j():null};function Mf(a,b){this.Sd=a;this.Df=b}function Nf(a){this.U=a}
Nf.prototype.eb=function(a,b,c,d){var e=new We,f;if(b.type===vb)b.source.ee?c=Of(this,a,b.path,b.Ga,c,d,e):(I(b.source.Se,"Unknown source."),f=b.source.Ee||Re(a.w())&&!b.path.e(),c=Pf(this,a,b.path,b.Ga,c,d,f,e));else if(b.type===Kc)b.source.ee?c=Qf(this,a,b.path,b.children,c,d,e):(I(b.source.Se,"Unknown source."),f=b.source.Ee||Re(a.w()),c=Rf(this,a,b.path,b.children,c,d,f,e));else if(b.type===ne)if(b.Id)if(b=b.path,null!=c.lc(b))c=a;else{f=new $e(c,a,d);d=a.N.j();if(b.e()||".priority"===O(b))Qe(a.w())?
b=c.Aa(af(a)):(b=a.w().j(),I(b instanceof P,"serverChildren would be complete if leaf node"),b=c.rc(b)),b=this.U.ya(d,b,e);else{var h=O(b),k=c.qc(h,a.w());null==k&&Te(a.w(),h)&&(k=d.Q(h));b=null!=k?this.U.F(d,h,k,E(b),f,e):a.N.j().Da(h)?this.U.F(d,h,H,E(b),f,e):d;b.e()&&Qe(a.w())&&(d=c.Aa(af(a)),d.J()&&(b=this.U.ya(b,d,e)))}d=Qe(a.w())||null!=c.lc(D);c=Kf(a,b,d,this.U.Na())}else c=Sf(this,a,b.path,b.Ob,c,d,e);else if(b.type===tb)d=b.path,b=a.w(),f=b.j(),h=b.da||d.e(),c=Tf(this,new Jf(a.N,new Pe(f,
h,b.Sb)),d,c,Ze,e);else throw jc("Unknown operation type: "+b.type);e=za(e.fb);d=c;b=d.N;b.da&&(f=b.j().J()||b.j().e(),h=Lf(a),(0<e.length||!a.N.da||f&&!b.j().Z(h)||!b.j().C().Z(h.C()))&&e.push(Ue(Lf(d))));return new Mf(c,e)};
function Tf(a,b,c,d,e,f){var h=b.N;if(null!=d.lc(c))return b;var k;if(c.e())I(Qe(b.w()),"If change path is empty, we must have complete server data"),Re(b.w())?(e=af(b),d=d.rc(e instanceof P?e:H)):d=d.Aa(af(b)),f=a.U.ya(b.N.j(),d,f);else{var m=O(c);if(".priority"==m)I(1==jd(c),"Can't have a priority with additional path components"),f=h.j(),k=b.w().j(),d=d.ad(c,f,k),f=null!=d?a.U.fa(f,d):h.j();else{var l=E(c);Te(h,m)?(k=b.w().j(),d=d.ad(c,h.j(),k),d=null!=d?h.j().Q(m).F(l,d):h.j().Q(m)):d=d.qc(m,
b.w());f=null!=d?a.U.F(h.j(),m,d,l,e,f):h.j()}}return Kf(b,f,h.da||c.e(),a.U.Na())}function Pf(a,b,c,d,e,f,h,k){var m=b.w();h=h?a.U:a.U.Ub();if(c.e())d=h.ya(m.j(),d,null);else if(h.Na()&&!m.Sb)d=m.j().F(c,d),d=h.ya(m.j(),d,null);else{var l=O(c);if(!Se(m,c)&&1<jd(c))return b;var u=E(c);d=m.j().Q(l).F(u,d);d=".priority"==l?h.fa(m.j(),d):h.F(m.j(),l,d,u,Ze,null)}m=m.da||c.e();b=new Jf(b.N,new Pe(d,m,h.Na()));return Tf(a,b,c,e,new $e(e,b,f),k)}
function Of(a,b,c,d,e,f,h){var k=b.N;e=new $e(e,b,f);if(c.e())h=a.U.ya(b.N.j(),d,h),a=Kf(b,h,!0,a.U.Na());else if(f=O(c),".priority"===f)h=a.U.fa(b.N.j(),d),a=Kf(b,h,k.da,k.Sb);else{c=E(c);var m=k.j().Q(f);if(!c.e()){var l=e.Te(f);d=null!=l?".priority"===Ed(c)&&l.P(c.parent()).e()?l:l.F(c,d):H}m.Z(d)?a=b:(h=a.U.F(k.j(),f,d,c,e,h),a=Kf(b,h,k.da,a.U.Na()))}return a}
function Qf(a,b,c,d,e,f,h){var k=b;be(d,function(d,l){var u=c.n(d);Te(b.N,O(u))&&(k=Of(a,k,u,l,e,f,h))});be(d,function(d,l){var u=c.n(d);Te(b.N,O(u))||(k=Of(a,k,u,l,e,f,h))});return k}function Uf(a,b){be(b,function(b,d){a=a.F(b,d)});return a}
function Rf(a,b,c,d,e,f,h,k){if(b.w().j().e()&&!Qe(b.w()))return b;var m=b;c=c.e()?d:Vd(S,c,d);var l=b.w().j();c.children.ha(function(c,d){if(l.Da(c)){var F=b.w().j().Q(c),F=Uf(F,d);m=Pf(a,m,new J(c),F,e,f,h,k)}});c.children.ha(function(c,d){var F=!Te(b.w(),c)&&null==d.value;l.Da(c)||F||(F=b.w().j().Q(c),F=Uf(F,d),m=Pf(a,m,new J(c),F,e,f,h,k))});return m}
function Sf(a,b,c,d,e,f,h){if(null!=e.lc(c))return b;var k=Re(b.w()),m=b.w();if(null!=d.value){if(c.e()&&m.da||Se(m,c))return Pf(a,b,c,m.j().P(c),e,f,k,h);if(c.e()){var l=S;m.j().O(Yc,function(a,b){l=l.set(new J(a),b)});return Rf(a,b,c,l,e,f,k,h)}return b}l=S;be(d,function(a){var b=c.n(a);Se(m,b)&&(l=l.set(a,m.j().P(b)))});return Rf(a,b,c,l,e,f,k,h)};function Vf(a,b){this.V=a;var c=a.m,d=new Bf(c.g),c=X(c)?new Bf(c.g):c.xa?new Df(c):new Cf(c);this.hf=new Nf(c);var e=b.w(),f=b.N,h=d.ya(H,e.j(),null),k=c.ya(H,f.j(),null);this.Ka=new Jf(new Pe(k,f.da,c.Na()),new Pe(h,e.da,d.Na()));this.Za=[];this.Jf=new df(a)}function Wf(a){return a.V}g=Vf.prototype;g.w=function(){return this.Ka.w().j()};g.hb=function(a){var b=af(this.Ka);return b&&(X(this.V.m)||!a.e()&&!b.Q(O(a)).e())?b.P(a):null};g.e=function(){return 0===this.Za.length};g.Nb=function(a){this.Za.push(a)};
g.kb=function(a,b){var c=[];if(b){I(null==a,"A cancel should cancel all event registrations.");var d=this.V.path;Ha(this.Za,function(a){(a=a.Me(b,d))&&c.push(a)})}if(a){for(var e=[],f=0;f<this.Za.length;++f){var h=this.Za[f];if(!h.matches(a))e.push(h);else if(a.Xe()){e=e.concat(this.Za.slice(f+1));break}}this.Za=e}else this.Za=[];return c};
g.eb=function(a,b,c){a.type===Kc&&null!==a.source.Hb&&(I(af(this.Ka),"We should always have a full cache before handling merges"),I(Lf(this.Ka),"Missing event cache, even though we have a server cache"));var d=this.Ka;a=this.hf.eb(d,a,b,c);b=this.hf;c=a.Sd;I(c.N.j().yc(b.U.g),"Event snap not indexed");I(c.w().j().yc(b.U.g),"Server snap not indexed");I(Qe(a.Sd.w())||!Qe(d.w()),"Once a server snap is complete, it should never go back");this.Ka=a.Sd;return Xf(this,a.Df,a.Sd.N.j(),null)};
function Yf(a,b){var c=a.Ka.N,d=[];c.j().J()||c.j().O(L,function(a,b){d.push(new V("child_added",b,a))});c.da&&d.push(Ue(c.j()));return Xf(a,d,c.j(),b)}function Xf(a,b,c,d){return ef(a.Jf,b,c,d?[d]:a.Za)};function Zf(){this.za={}}g=Zf.prototype;g.e=function(){return Ea(this.za)};g.eb=function(a,b,c){var d=a.source.Hb;if(null!==d)return d=x(this.za,d),I(null!=d,"SyncTree gave us an op for an invalid query."),d.eb(a,b,c);var e=[];r(this.za,function(d){e=e.concat(d.eb(a,b,c))});return e};g.Nb=function(a,b,c,d,e){var f=a.ja(),h=x(this.za,f);if(!h){var h=c.Aa(e?d:null),k=!1;h?k=!0:(h=d instanceof P?c.rc(d):H,k=!1);h=new Vf(a,new Jf(new Pe(h,k,!1),new Pe(d,e,!1)));this.za[f]=h}h.Nb(b);return Yf(h,b)};
g.kb=function(a,b,c){var d=a.ja(),e=[],f=[],h=null!=$f(this);if("default"===d){var k=this;r(this.za,function(a,d){f=f.concat(a.kb(b,c));a.e()&&(delete k.za[d],X(a.V.m)||e.push(a.V))})}else{var m=x(this.za,d);m&&(f=f.concat(m.kb(b,c)),m.e()&&(delete this.za[d],X(m.V.m)||e.push(m.V)))}h&&null==$f(this)&&e.push(new R(a.u,a.path));return{hg:e,Kf:f}};function ag(a){return Ia(za(a.za),function(a){return!X(a.V.m)})}g.hb=function(a){var b=null;r(this.za,function(c){b=b||c.hb(a)});return b};
function bg(a,b){if(X(b.m))return $f(a);var c=b.ja();return x(a.za,c)}function $f(a){return Da(a.za,function(a){return X(a.V.m)})||null};function cg(){this.S=fe;this.la=[];this.Bc=-1}function dg(a,b){for(var c=0;c<a.la.length;c++){var d=a.la[c];if(d.Zc===b)return d}return null}g=cg.prototype;
g.Ed=function(a){var b=Na(this.la,function(b){return b.Zc===a});I(0<=b,"removeWrite called with nonexistent writeId.");var c=this.la[b];this.la.splice(b,1);for(var d=c.visible,e=!1,f=this.la.length-1;d&&0<=f;){var h=this.la[f];h.visible&&(f>=b&&eg(h,c.path)?d=!1:c.path.contains(h.path)&&(e=!0));f--}if(d){if(e)this.S=fg(this.la,gg,D),this.Bc=0<this.la.length?this.la[this.la.length-1].Zc:-1;else if(c.Ga)this.S=this.S.Ed(c.path);else{var k=this;r(c.children,function(a,b){k.S=k.S.Ed(c.path.n(b))})}return!0}return!1};
g.Aa=function(a,b,c,d){if(c||d){var e=ke(this.S,a);return!d&&e.e()?b:d||null!=b||null!=ie(e,D)?(e=fg(this.la,function(b){return(b.visible||d)&&(!c||!(0<=Ga(c,b.Zc)))&&(b.path.contains(a)||a.contains(b.path))},a),b=b||H,e.apply(b)):null}e=ie(this.S,a);if(null!=e)return e;e=ke(this.S,a);return e.e()?b:null!=b||null!=ie(e,D)?(b=b||H,e.apply(b)):null};
g.rc=function(a,b){var c=H,d=ie(this.S,a);if(d)d.J()||d.O(L,function(a,b){c=c.T(a,b)});else if(b){var e=ke(this.S,a);b.O(L,function(a,b){var d=ke(e,new J(a)).apply(b);c=c.T(a,d)});Ha(je(e),function(a){c=c.T(a.name,a.R)})}else e=ke(this.S,a),Ha(je(e),function(a){c=c.T(a.name,a.R)});return c};g.ad=function(a,b,c,d){I(c||d,"Either existingEventSnap or existingServerSnap must exist");a=a.n(b);if(null!=ie(this.S,a))return null;a=ke(this.S,a);return a.e()?d.P(b):a.apply(d.P(b))};
g.qc=function(a,b,c){a=a.n(b);var d=ie(this.S,a);return null!=d?d:Te(c,b)?ke(this.S,a).apply(c.j().Q(b)):null};g.lc=function(a){return ie(this.S,a)};g.Xd=function(a,b,c,d,e,f){var h;a=ke(this.S,a);h=ie(a,D);if(null==h)if(null!=b)h=a.apply(b);else return[];h=h.nb(f);if(h.e()||h.J())return[];b=[];a=Sc(f);e=e?h.Zb(c,f):h.Xb(c,f);for(f=M(e);f&&b.length<d;)0!==a(f,c)&&b.push(f),f=M(e);return b};
function eg(a,b){return a.Ga?a.path.contains(b):!!Ca(a.children,function(c,d){return a.path.n(d).contains(b)})}function gg(a){return a.visible}
function fg(a,b,c){for(var d=fe,e=0;e<a.length;++e){var f=a[e];if(b(f)){var h=f.path;if(f.Ga)c.contains(h)?(h=Q(c,h),d=ge(d,h,f.Ga)):h.contains(c)&&(h=Q(h,c),d=ge(d,D,f.Ga.P(h)));else if(f.children)if(c.contains(h))h=Q(c,h),d=he(d,h,f.children);else{if(h.contains(c))if(h=Q(h,c),h.e())d=he(d,D,f.children);else if(f=x(f.children,O(h)))f=f.P(E(h)),d=ge(d,D,f)}else throw jc("WriteRecord should have .snap or .children");}}return d}function hg(a,b){this.Lb=a;this.W=b}g=hg.prototype;
g.Aa=function(a,b,c){return this.W.Aa(this.Lb,a,b,c)};g.rc=function(a){return this.W.rc(this.Lb,a)};g.ad=function(a,b,c){return this.W.ad(this.Lb,a,b,c)};g.lc=function(a){return this.W.lc(this.Lb.n(a))};g.Xd=function(a,b,c,d,e){return this.W.Xd(this.Lb,a,b,c,d,e)};g.qc=function(a,b){return this.W.qc(this.Lb,a,b)};g.n=function(a){return new hg(this.Lb.n(a),this.W)};function ig(a){this.wa=S;this.jb=new cg;this.De={};this.ic={};this.Cc=a}function jg(a,b,c,d,e){var f=a.jb,h=e;I(d>f.Bc,"Stacking an older write on top of newer ones");n(h)||(h=!0);f.la.push({path:b,Ga:c,Zc:d,visible:h});h&&(f.S=ge(f.S,b,c));f.Bc=d;return e?kg(a,new ub(oe,b,c)):[]}function lg(a,b,c,d){var e=a.jb;I(d>e.Bc,"Stacking an older merge on top of newer ones");e.la.push({path:b,children:c,Zc:d,visible:!0});e.S=he(e.S,b,c);e.Bc=d;c=Sd(c);return kg(a,new Jc(oe,b,c))}
function mg(a,b,c){c=c||!1;var d=dg(a.jb,b);if(a.jb.Ed(b)){var e=S;null!=d.Ga?e=e.set(D,!0):gb(d.children,function(a,b){e=e.set(new J(a),b)});return kg(a,new me(d.path,e,c))}return[]}function ng(a,b,c){c=Sd(c);return kg(a,new Jc(qe,b,c))}function og(a,b,c,d){d=pg(a,d);if(null!=d){var e=qg(d);d=e.path;e=e.Hb;b=Q(d,b);c=new ub(new pe(!1,!0,e,!0),b,c);return rg(a,d,c)}return[]}
function sg(a,b,c,d){if(d=pg(a,d)){var e=qg(d);d=e.path;e=e.Hb;b=Q(d,b);c=Sd(c);c=new Jc(new pe(!1,!0,e,!0),b,c);return rg(a,d,c)}return[]}
ig.prototype.Nb=function(a,b){var c=a.path,d=null,e=!1;$d(this.wa,c,function(a,b){var f=Q(a,c);d=d||b.hb(f);e=e||null!=$f(b)});var f=this.wa.get(c);f?(e=e||null!=$f(f),d=d||f.hb(D)):(f=new Zf,this.wa=this.wa.set(c,f));var h;null!=d?h=!0:(h=!1,d=H,de(this.wa.subtree(c),function(a,b){var c=b.hb(D);c&&(d=d.T(a,c))}));var k=null!=bg(f,a);if(!k&&!X(a.m)){var m=tg(a);I(!(m in this.ic),"View does not exist, but we have a tag");var l=ug++;this.ic[m]=l;this.De["_"+l]=m}h=f.Nb(a,b,new hg(c,this.jb),d,h);k||
e||(f=bg(f,a),h=h.concat(vg(this,a,f)));return h};
ig.prototype.kb=function(a,b,c){var d=a.path,e=this.wa.get(d),f=[];if(e&&("default"===a.ja()||null!=bg(e,a))){f=e.kb(a,b,c);e.e()&&(this.wa=this.wa.remove(d));e=f.hg;f=f.Kf;b=-1!==Na(e,function(a){return X(a.m)});var h=Yd(this.wa,d,function(a,b){return null!=$f(b)});if(b&&!h&&(d=this.wa.subtree(d),!d.e()))for(var d=wg(d),k=0;k<d.length;++k){var m=d[k],l=m.V,m=xg(this,m);this.Cc.Ae(yg(l),zg(this,l),m.ld,m.G)}if(!h&&0<e.length&&!c)if(b)this.Cc.Od(yg(a),null);else{var u=this;Ha(e,function(a){a.ja();
var b=u.ic[tg(a)];u.Cc.Od(yg(a),b)})}Ag(this,e)}return f};ig.prototype.Aa=function(a,b){var c=this.jb,d=Yd(this.wa,a,function(b,c){var d=Q(b,a);if(d=c.hb(d))return d});return c.Aa(a,d,b,!0)};function wg(a){return Wd(a,function(a,c,d){if(c&&null!=$f(c))return[$f(c)];var e=[];c&&(e=ag(c));r(d,function(a){e=e.concat(a)});return e})}function Ag(a,b){for(var c=0;c<b.length;++c){var d=b[c];if(!X(d.m)){var d=tg(d),e=a.ic[d];delete a.ic[d];delete a.De["_"+e]}}}
function yg(a){return X(a.m)&&!Nc(a.m)?a.wb():a}function vg(a,b,c){var d=b.path,e=zg(a,b);c=xg(a,c);b=a.Cc.Ae(yg(b),e,c.ld,c.G);d=a.wa.subtree(d);if(e)I(null==$f(d.value),"If we're adding a query, it shouldn't be shadowed");else for(e=Wd(d,function(a,b,c){if(!a.e()&&b&&null!=$f(b))return[Wf($f(b))];var d=[];b&&(d=d.concat(Ja(ag(b),function(a){return a.V})));r(c,function(a){d=d.concat(a)});return d}),d=0;d<e.length;++d)c=e[d],a.Cc.Od(yg(c),zg(a,c));return b}
function xg(a,b){var c=b.V,d=zg(a,c);return{ld:function(){return(b.w()||H).hash()},G:function(b){if("ok"===b){if(d){var f=c.path;if(b=pg(a,d)){var h=qg(b);b=h.path;h=h.Hb;f=Q(b,f);f=new sb(new pe(!1,!0,h,!0),f);b=rg(a,b,f)}else b=[]}else b=kg(a,new sb(qe,c.path));return b}f="Unknown Error";"too_big"===b?f="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==b?f="Client doesn't have permission to access the desired data.":"unavailable"==b&&
(f="The service is unavailable");f=Error(b+" at "+c.path.toString()+": "+f);f.code=b.toUpperCase();return a.kb(c,null,f)}}}function tg(a){return a.path.toString()+"$"+a.ja()}function qg(a){var b=a.indexOf("$");I(-1!==b&&b<a.length-1,"Bad queryKey.");return{Hb:a.substr(b+1),path:new J(a.substr(0,b))}}function pg(a,b){var c=a.De,d="_"+b;return d in c?c[d]:void 0}function zg(a,b){var c=tg(b);return x(a.ic,c)}var ug=1;
function rg(a,b,c){var d=a.wa.get(b);I(d,"Missing sync point for query tag that we're tracking");return d.eb(c,new hg(b,a.jb),null)}function kg(a,b){return Bg(a,b,a.wa,null,new hg(D,a.jb))}function Bg(a,b,c,d,e){if(b.path.e())return Cg(a,b,c,d,e);var f=c.get(D);null==d&&null!=f&&(d=f.hb(D));var h=[],k=O(b.path),m=b.Mc(k);if((c=c.children.get(k))&&m)var l=d?d.Q(k):null,k=e.n(k),h=h.concat(Bg(a,m,c,l,k));f&&(h=h.concat(f.eb(b,e,d)));return h}
function Cg(a,b,c,d,e){var f=c.get(D);null==d&&null!=f&&(d=f.hb(D));var h=[];c.children.ha(function(c,f){var l=d?d.Q(c):null,u=e.n(c),z=b.Mc(c);z&&(h=h.concat(Cg(a,z,f,l,u)))});f&&(h=h.concat(f.eb(b,e,d)));return h};function Dg(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:"")};function Eg(){Ad.call(this,["online"]);this.hc=!0;if("undefined"!==typeof window&&"undefined"!==typeof window.addEventListener&&!Dg()){var a=this;window.addEventListener("online",function(){a.hc||(a.hc=!0,a.Ge("online",!0))},!1);window.addEventListener("offline",function(){a.hc&&(a.hc=!1,a.Ge("online",!1))},!1)}}la(Eg,Ad);Eg.prototype.Ue=function(a){I("online"===a,"Unknown event type: "+a);return[this.hc]};ca(Eg);var Mb="websocket",Nb="long_polling";function Fg(a){this.te=a;this.Bd=[];this.Qb=0;this.Yd=-1;this.Fb=null}function Gg(a,b,c){a.Yd=b;a.Fb=c;a.Yd<a.Qb&&(a.Fb(),a.Fb=null)}function Hg(a,b,c){for(a.Bd[b]=c;a.Bd[a.Qb];){var d=a.Bd[a.Qb];delete a.Bd[a.Qb];for(var e=0;e<d.length;++e)if(d[e]){var f=a;Dc(function(){f.te(d[e])})}if(a.Qb===a.Yd){a.Fb&&(clearTimeout(a.Fb),a.Fb(),a.Fb=null);break}a.Qb++}};function Ig(a,b,c,d){this.Zd=a;this.f=qc(a);this.jc=b;this.pb=this.qb=0;this.Va=wd(b);this.tf=c;this.wc=!1;this.Cb=d;this.Yc=function(a){return Lb(b,Nb,a)}}var Jg,Kg;
Ig.prototype.open=function(a,b){this.Ne=0;this.ia=b;this.bf=new Fg(a);this.Ab=!1;var c=this;this.sb=setTimeout(function(){c.f("Timed out trying to connect.");c.bb();c.sb=null},Math.floor(3E4));vc(function(){if(!c.Ab){c.Ta=new Lg(function(a,b,d,k,m){Mg(c,arguments);if(c.Ta)if(c.sb&&(clearTimeout(c.sb),c.sb=null),c.wc=!0,"start"==a)c.id=b,c.ff=d;else if("close"===a)b?(c.Ta.Kd=!1,Gg(c.bf,b,function(){c.bb()})):c.bb();else throw Error("Unrecognized command received: "+a);},function(a,b){Mg(c,arguments);
Hg(c.bf,a,b)},function(){c.bb()},c.Yc);var a={start:"t"};a.ser=Math.floor(1E8*Math.random());c.Ta.Qd&&(a.cb=c.Ta.Qd);a.v="5";c.tf&&(a.s=c.tf);c.Cb&&(a.ls=c.Cb);"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(a.r="f");a=c.Yc(a);c.f("Connecting via long-poll to "+a);Ng(c.Ta,a,function(){})}})};
Ig.prototype.start=function(){var a=this.Ta,b=this.ff;a.Vf=this.id;a.Wf=b;for(a.Ud=!0;Og(a););a=this.id;b=this.ff;this.fc=document.createElement("iframe");var c={dframe:"t"};c.id=a;c.pw=b;this.fc.src=this.Yc(c);this.fc.style.display="none";document.body.appendChild(this.fc)};
Ig.isAvailable=function(){return Jg||!Kg&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.rg)&&!0};g=Ig.prototype;g.sd=function(){};g.Tc=function(){this.Ab=!0;this.Ta&&(this.Ta.close(),this.Ta=null);this.fc&&(document.body.removeChild(this.fc),this.fc=null);this.sb&&(clearTimeout(this.sb),this.sb=null)};
g.bb=function(){this.Ab||(this.f("Longpoll is closing itself"),this.Tc(),this.ia&&(this.ia(this.wc),this.ia=null))};g.close=function(){this.Ab||(this.f("Longpoll is being closed."),this.Tc())};g.send=function(a){a=w(a);this.qb+=a.length;Cb(this.Va,"bytes_sent",a.length);a=lb(a);a=ab(a,!0);a=zc(a,1840);for(var b=0;b<a.length;b++){var c=this.Ta;c.Qc.push({jg:this.Ne,pg:a.length,Pe:a[b]});c.Ud&&Og(c);this.Ne++}};function Mg(a,b){var c=w(b).length;a.pb+=c;Cb(a.Va,"bytes_received",c)}
function Lg(a,b,c,d){this.Yc=d;this.ib=c;this.ve=new yd;this.Qc=[];this.$d=Math.floor(1E8*Math.random());this.Kd=!0;this.Qd=ic();window["pLPCommand"+this.Qd]=a;window["pRTLPCB"+this.Qd]=b;a=document.createElement("iframe");a.style.display="none";if(document.body){document.body.appendChild(a);try{a.contentWindow.document||C("No IE domain setting required")}catch(e){a.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";
a.contentDocument?a.gb=a.contentDocument:a.contentWindow?a.gb=a.contentWindow.document:a.document&&(a.gb=a.document);this.Ea=a;a="";this.Ea.src&&"javascript:"===this.Ea.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";\x3c/script>');a="<html><body>"+a+"</body></html>";try{this.Ea.gb.open(),this.Ea.gb.write(a),this.Ea.gb.close()}catch(f){C("frame writing exception"),f.stack&&C(f.stack),C(f)}}
Lg.prototype.close=function(){this.Ud=!1;if(this.Ea){this.Ea.gb.body.innerHTML="";var a=this;setTimeout(function(){null!==a.Ea&&(document.body.removeChild(a.Ea),a.Ea=null)},Math.floor(0))}var b=this.ib;b&&(this.ib=null,b())};
function Og(a){if(a.Ud&&a.Kd&&a.ve.count()<(0<a.Qc.length?2:1)){a.$d++;var b={};b.id=a.Vf;b.pw=a.Wf;b.ser=a.$d;for(var b=a.Yc(b),c="",d=0;0<a.Qc.length;)if(1870>=a.Qc[0].Pe.length+30+c.length){var e=a.Qc.shift(),c=c+"&seg"+d+"="+e.jg+"&ts"+d+"="+e.pg+"&d"+d+"="+e.Pe;d++}else break;Pg(a,b+c,a.$d);return!0}return!1}function Pg(a,b,c){function d(){a.ve.remove(c);Og(a)}a.ve.add(c,1);var e=setTimeout(d,Math.floor(25E3));Ng(a,b,function(){clearTimeout(e);d()})}
function Ng(a,b,c){setTimeout(function(){try{if(a.Kd){var d=a.Ea.gb.createElement("script");d.type="text/javascript";d.async=!0;d.src=b;d.onload=d.onreadystatechange=function(){var a=d.readyState;a&&"loaded"!==a&&"complete"!==a||(d.onload=d.onreadystatechange=null,d.parentNode&&d.parentNode.removeChild(d),c())};d.onerror=function(){C("Long-poll script failed to load: "+b);a.Kd=!1;a.close()};a.Ea.gb.body.appendChild(d)}}catch(e){}},Math.floor(1))};var Qg=null;"undefined"!==typeof MozWebSocket?Qg=MozWebSocket:"undefined"!==typeof WebSocket&&(Qg=WebSocket);function Rg(a,b,c,d){this.Zd=a;this.f=qc(this.Zd);this.frames=this.zc=null;this.pb=this.qb=this.Fe=0;this.Va=wd(b);a={v:"5"};"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(a.r="f");c&&(a.s=c);d&&(a.ls=d);this.Ke=Lb(b,Mb,a)}var Sg;
Rg.prototype.open=function(a,b){this.ib=b;this.Xf=a;this.f("Websocket connecting to "+this.Ke);this.wc=!1;Hb.set("previous_websocket_failure",!0);try{this.Ia=new Qg(this.Ke)}catch(c){this.f("Error instantiating WebSocket.");var d=c.message||c.data;d&&this.f(d);this.bb();return}var e=this;this.Ia.onopen(function(){e.f("Websocket connected.");e.wc=!0});this.Ia.onclose(function(){e.f("Websocket connection was disconnected.");e.Ia=null;e.bb()});this.Ia.onmessage(function(a){if(null!==e.Ia)if(a=a.data,
e.pb+=a.length,Cb(e.Va,"bytes_received",a.length),Tg(e),null!==e.frames)Ug(e,a);else{a:{I(null===e.frames,"We already have a frame buffer");if(6>=a.length){var b=Number(a);if(!isNaN(b)){e.Fe=b;e.frames=[];a=null;break a}}e.Fe=1;e.frames=[]}null!==a&&Ug(e,a)}});this.Ia.onerror(function(a){e.f("WebSocket error.  Closing connection.");(a=a.message||a.data)&&e.f(a);e.bb()})};Rg.prototype.start=function(){};
Rg.isAvailable=function(){var a=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var b=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);b&&1<b.length&&4.4>parseFloat(b[1])&&(a=!0)}return!a&&null!==Qg&&!Sg};Rg.responsesRequiredToBeHealthy=2;Rg.healthyTimeout=3E4;g=Rg.prototype;g.sd=function(){Hb.remove("previous_websocket_failure")};function Ug(a,b){a.frames.push(b);if(a.frames.length==a.Fe){var c=a.frames.join("");a.frames=null;c=eb(c);a.Xf(c)}}
g.send=function(a){Tg(this);a=w(a);this.qb+=a.length;Cb(this.Va,"bytes_sent",a.length);a=zc(a,16384);1<a.length&&Vg(this,String(a.length));for(var b=0;b<a.length;b++)Vg(this,a[b])};g.Tc=function(){this.Ab=!0;this.zc&&(clearInterval(this.zc),this.zc=null);this.Ia&&(this.Ia.close(),this.Ia=null)};g.bb=function(){this.Ab||(this.f("WebSocket is closing itself"),this.Tc(),this.ib&&(this.ib(this.wc),this.ib=null))};g.close=function(){this.Ab||(this.f("WebSocket is being closed"),this.Tc())};
function Tg(a){clearInterval(a.zc);a.zc=setInterval(function(){a.Ia&&Vg(a,"0");Tg(a)},Math.floor(45E3))}function Vg(a,b){try{a.Ia.send(b)}catch(c){a.f("Exception thrown from WebSocket.send():",c.message||c.data,"Closing connection."),setTimeout(q(a.bb,a),0)}};function Wg(a){Xg(this,a)}var Yg=[Ig,Rg];function Xg(a,b){var c=Rg&&Rg.isAvailable(),d=c&&!(Hb.Ze||!0===Hb.get("previous_websocket_failure"));b.qg&&(c||N("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),d=!0);if(d)a.Wc=[Rg];else{var e=a.Wc=[];Ac(Yg,function(a,b){b&&b.isAvailable()&&e.push(b)})}}function Zg(a){if(0<a.Wc.length)return a.Wc[0];throw Error("No transports available");};function $g(a,b,c,d,e,f,h){this.id=a;this.f=qc("c:"+this.id+":");this.te=c;this.Lc=d;this.ia=e;this.se=f;this.L=b;this.Ad=[];this.Le=0;this.sf=new Wg(b);this.Ua=0;this.Cb=h;this.f("Connection created");ah(this)}
function ah(a){var b=Zg(a.sf);a.I=new b("c:"+a.id+":"+a.Le++,a.L,void 0,a.Cb);a.xe=b.responsesRequiredToBeHealthy||0;var c=bh(a,a.I),d=ch(a,a.I);a.Xc=a.I;a.Rc=a.I;a.D=null;a.Bb=!1;setTimeout(function(){a.I&&a.I.open(c,d)},Math.floor(0));b=b.healthyTimeout||0;0<b&&(a.md=Fc(function(){a.md=null;a.Bb||(a.I&&102400<a.I.pb?(a.f("Connection exceeded healthy timeout but has received "+a.I.pb+" bytes.  Marking connection healthy."),a.Bb=!0,a.I.sd()):a.I&&10240<a.I.qb?a.f("Connection exceeded healthy timeout but has sent "+
a.I.qb+" bytes.  Leaving connection alive."):(a.f("Closing unhealthy connection after timeout."),a.close()))},Math.floor(b)))}function ch(a,b){return function(c){b===a.I?(a.I=null,c||0!==a.Ua?1===a.Ua&&a.f("Realtime connection lost."):(a.f("Realtime connection failed."),"s-"===a.L.$a.substr(0,2)&&(Hb.remove("host:"+a.L.host),a.L.$a=a.L.host)),a.close()):b===a.D?(a.f("Secondary connection lost."),c=a.D,a.D=null,a.Xc!==c&&a.Rc!==c||a.close()):a.f("closing an old connection")}}
function bh(a,b){return function(c){if(2!=a.Ua)if(b===a.Rc){var d=xc("t",c);c=xc("d",c);if("c"==d){if(d=xc("t",c),"d"in c)if(c=c.d,"h"===d){var d=c.ts,e=c.v,f=c.h;a.qf=c.s;Kb(a.L,f);0==a.Ua&&(a.I.start(),dh(a,a.I,d),"5"!==e&&N("Protocol version mismatch detected"),c=a.sf,(c=1<c.Wc.length?c.Wc[1]:null)&&eh(a,c))}else if("n"===d){a.f("recvd end transmission on primary");a.Rc=a.D;for(c=0;c<a.Ad.length;++c)a.wd(a.Ad[c]);a.Ad=[];fh(a)}else"s"===d?(a.f("Connection shutdown command received. Shutting down..."),
a.se&&(a.se(c),a.se=null),a.ia=null,a.close()):"r"===d?(a.f("Reset packet received.  New host: "+c),Kb(a.L,c),1===a.Ua?a.close():(gh(a),ah(a))):"e"===d?rc("Server Error: "+c):"o"===d?(a.f("got pong on primary."),hh(a),ih(a)):rc("Unknown control packet command: "+d)}else"d"==d&&a.wd(c)}else if(b===a.D)if(d=xc("t",c),c=xc("d",c),"c"==d)"t"in c&&(c=c.t,"a"===c?jh(a):"r"===c?(a.f("Got a reset on secondary, closing it"),a.D.close(),a.Xc!==a.D&&a.Rc!==a.D||a.close()):"o"===c&&(a.f("got pong on secondary."),
a.pf--,jh(a)));else if("d"==d)a.Ad.push(c);else throw Error("Unknown protocol layer: "+d);else a.f("message on old connection")}}$g.prototype.ua=function(a){kh(this,{t:"d",d:a})};function fh(a){a.Xc===a.D&&a.Rc===a.D&&(a.f("cleaning up and promoting a connection: "+a.D.Zd),a.I=a.D,a.D=null)}
function jh(a){0>=a.pf?(a.f("Secondary connection is healthy."),a.Bb=!0,a.D.sd(),a.D.start(),a.f("sending client ack on secondary"),a.D.send({t:"c",d:{t:"a",d:{}}}),a.f("Ending transmission on primary"),a.I.send({t:"c",d:{t:"n",d:{}}}),a.Xc=a.D,fh(a)):(a.f("sending ping on secondary."),a.D.send({t:"c",d:{t:"p",d:{}}}))}$g.prototype.wd=function(a){hh(this);this.te(a)};function hh(a){a.Bb||(a.xe--,0>=a.xe&&(a.f("Primary connection is healthy."),a.Bb=!0,a.I.sd()))}
function eh(a,b){a.D=new b("c:"+a.id+":"+a.Le++,a.L,a.qf);a.pf=b.responsesRequiredToBeHealthy||0;a.D.open(bh(a,a.D),ch(a,a.D));Fc(function(){a.D&&(a.f("Timed out trying to upgrade."),a.D.close())},Math.floor(6E4))}function dh(a,b,c){a.f("Realtime connection established.");a.I=b;a.Ua=1;a.Lc&&(a.Lc(c,a.qf),a.Lc=null);0===a.xe?(a.f("Primary connection is healthy."),a.Bb=!0):Fc(function(){ih(a)},Math.floor(5E3))}
function ih(a){a.Bb||1!==a.Ua||(a.f("sending ping on primary."),kh(a,{t:"c",d:{t:"p",d:{}}}))}function kh(a,b){if(1!==a.Ua)throw"Connection is not connected";a.Xc.send(b)}$g.prototype.close=function(){2!==this.Ua&&(this.f("Closing realtime connection."),this.Ua=2,gh(this),this.ia&&(this.ia(),this.ia=null))};function gh(a){a.f("Shutting down all connections");a.I&&(a.I.close(),a.I=null);a.D&&(a.D.close(),a.D=null);a.md&&(clearTimeout(a.md),a.md=null)};function lh(a,b,c,d,e,f){this.id=mh++;this.f=qc("p:"+this.id+":");this.qd={};this.$={};this.pa=[];this.Oc=0;this.Kc=[];this.ma=!1;this.Sa=1E3;this.td=3E5;this.Gb=b;this.Jc=c;this.ue=d;this.L=a;this.ob=this.Fa=this.Cb=this.ze=null;this.$c=e;this.de=!1;this.ke=0;if(f)throw Error("Auth override specified in options, but not supported on non Node.js platforms");this.Vd=f;this.ub=null;this.Mb=!1;this.Gd={};this.ig=0;this.Re=!0;this.Ac=this.me=null;nh(this,0);Oe.Vb().gc("visible",this.Zf,this);-1===a.host.indexOf("fblocal")&&
Eg.Vb().gc("online",this.Yf,this)}var mh=0,oh=0;g=lh.prototype;g.ua=function(a,b,c){var d=++this.ig;a={r:d,a:a,b:b};this.f(w(a));I(this.ma,"sendRequest call when we're not connected not allowed.");this.Fa.ua(a);c&&(this.Gd[d]=c)};
g.$e=function(a,b,c,d){var e=a.ja(),f=a.path.toString();this.f("Listen called for "+f+" "+e);this.$[f]=this.$[f]||{};I(Nc(a.m)||!X(a.m),"listen() called for non-default but complete query");I(!this.$[f][e],"listen() called twice for same path/queryId.");a={G:d,ld:b,eg:a,tag:c};this.$[f][e]=a;this.ma&&ph(this,a)};
function ph(a,b){var c=b.eg,d=c.path.toString(),e=c.ja();a.f("Listen on "+d+" for "+e);var f={p:d};b.tag&&(f.q=Af(c.m),f.t=b.tag);f.h=b.ld();a.ua("q",f,function(f){var k=f.d,m=f.s;if(k&&"object"===typeof k&&fb(k,"w")){var l=x(k,"w");ea(l)&&0<=Ga(l,"no_index")&&N("Using an unspecified index. Consider adding "+('".indexOn": "'+c.m.g.toString()+'"')+" at "+c.path.toString()+" to your security rules for better performance")}(a.$[d]&&a.$[d][e])===b&&(a.f("listen response",f),"ok"!==m&&qh(a,d,e),b.G&&b.G(m,
k))})}g.kf=function(a){this.ob=a;this.f("Auth token refreshed");this.ob?rh(this):this.ma&&this.ua("unauth",{},function(){});if(a&&40===a.length||Ic(a))this.f("Admin auth credential detected.  Reducing max reconnect time."),this.td=3E4};function rh(a){if(a.ma&&a.ob){var b=a.ob,c=Hc(b)?"auth":"gauth",d={cred:b};null===a.Vd?d.noauth=!0:"object"===typeof a.Vd&&(d.authvar=a.Vd);a.ua(c,d,function(c){var d=c.s;c=c.d||"error";a.ob===b&&("ok"===d?a.ke=0:sh(a,d,c))})}}
g.uf=function(a,b){var c=a.path.toString(),d=a.ja();this.f("Unlisten called for "+c+" "+d);I(Nc(a.m)||!X(a.m),"unlisten() called for non-default but complete query");if(qh(this,c,d)&&this.ma){var e=Af(a.m);this.f("Unlisten on "+c+" for "+d);c={p:c};b&&(c.q=e,c.t=b);this.ua("n",c)}};g.re=function(a,b,c){this.ma?th(this,"o",a,b,c):this.Kc.push({we:a,action:"o",data:b,G:c})};g.cf=function(a,b,c){this.ma?th(this,"om",a,b,c):this.Kc.push({we:a,action:"om",data:b,G:c})};
g.xd=function(a,b){this.ma?th(this,"oc",a,null,b):this.Kc.push({we:a,action:"oc",data:null,G:b})};function th(a,b,c,d,e){c={p:c,d:d};a.f("onDisconnect "+b,c);a.ua(b,c,function(a){e&&setTimeout(function(){e(a.s,a.d)},Math.floor(0))})}g.put=function(a,b,c,d){uh(this,"p",a,b,c,d)};g.af=function(a,b,c,d){uh(this,"m",a,b,c,d)};function uh(a,b,c,d,e,f){d={p:c,d:d};n(f)&&(d.h=f);a.pa.push({action:b,mf:d,G:e});a.Oc++;b=a.pa.length-1;a.ma?vh(a,b):a.f("Buffering put: "+c)}
function vh(a,b){var c=a.pa[b].action,d=a.pa[b].mf,e=a.pa[b].G;a.pa[b].fg=a.ma;a.ua(c,d,function(d){a.f(c+" response",d);delete a.pa[b];a.Oc--;0===a.Oc&&(a.pa=[]);e&&e(d.s,d.d)})}g.ye=function(a){this.ma&&(a={c:a},this.f("reportStats",a),this.ua("s",a,function(a){"ok"!==a.s&&this.f("reportStats","Error sending stats: "+a.d)}))};
g.wd=function(a){if("r"in a){this.f("from server: "+w(a));var b=a.r,c=this.Gd[b];c&&(delete this.Gd[b],c(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&(b=a.a,a=a.b,this.f("handleServerMessage",b,a),"d"===b?this.Gb(a.p,a.d,!1,a.t):"m"===b?this.Gb(a.p,a.d,!0,a.t):"c"===b?wh(this,a.p,a.q):"ac"===b?sh(this,a.s,a.d):"sd"===b?this.ze?this.ze(a):"msg"in a&&"undefined"!==typeof console&&console.log("FIREBASE: "+a.msg.replace("\n","\nFIREBASE: ")):rc("Unrecognized action received from server: "+
w(b)+"\nAre you using the latest client?"))}};g.Lc=function(a,b){this.f("connection ready");this.ma=!0;this.Ac=(new Date).getTime();this.ue({serverTimeOffset:a-(new Date).getTime()});this.Cb=b;if(this.Re){var c={};c["sdk.js."+firebase.SDK_VERSION.replace(/\./g,"-")]=1;Dg()?c["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(c["framework.reactnative"]=1);this.ye(c)}xh(this);this.Re=!1;this.Jc(!0)};
function nh(a,b){I(!a.Fa,"Scheduling a connect when we're already connected/ing?");a.ub&&clearTimeout(a.ub);a.ub=setTimeout(function(){a.ub=null;yh(a)},Math.floor(b))}g.Zf=function(a){a&&!this.Mb&&this.Sa===this.td&&(this.f("Window became visible.  Reducing delay."),this.Sa=1E3,this.Fa||nh(this,0));this.Mb=a};g.Yf=function(a){a?(this.f("Browser went online."),this.Sa=1E3,this.Fa||nh(this,0)):(this.f("Browser went offline.  Killing connection."),this.Fa&&this.Fa.close())};
g.df=function(){this.f("data client disconnected");this.ma=!1;this.Fa=null;for(var a=0;a<this.pa.length;a++){var b=this.pa[a];b&&"h"in b.mf&&b.fg&&(b.G&&b.G("disconnect"),delete this.pa[a],this.Oc--)}0===this.Oc&&(this.pa=[]);this.Gd={};zh(this)&&(this.Mb?this.Ac&&(3E4<(new Date).getTime()-this.Ac&&(this.Sa=1E3),this.Ac=null):(this.f("Window isn't visible.  Delaying reconnect."),this.Sa=this.td,this.me=(new Date).getTime()),a=Math.max(0,this.Sa-((new Date).getTime()-this.me)),a*=Math.random(),this.f("Trying to reconnect in "+
a+"ms"),nh(this,a),this.Sa=Math.min(this.td,1.3*this.Sa));this.Jc(!1)};
function yh(a){if(zh(a)){a.f("Making a connection attempt");a.me=(new Date).getTime();a.Ac=null;var b=q(a.wd,a),c=q(a.Lc,a),d=q(a.df,a),e=a.id+":"+oh++,f=a.Cb,h=!1,k=null,m=function(){k?k.close():(h=!0,d())};a.Fa={close:m,ua:function(a){I(k,"sendRequest call when we're not connected not allowed.");k.ua(a)}};var l=a.de;a.de=!1;a.$c.getToken(l).then(function(l){h?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),a.ob=l&&l.accessToken,k=new $g(e,a.L,b,c,d,function(b){N(b+
" ("+a.L.toString()+")");a.ab("server_kill")},f))}).then(null,function(b){a.f("Failed to get token: "+b);h||m()})}}g.ab=function(a){C("Interrupting connection for reason: "+a);this.qd[a]=!0;this.Fa?this.Fa.close():(this.ub&&(clearTimeout(this.ub),this.ub=null),this.ma&&this.df())};g.kc=function(a){C("Resuming connection for reason: "+a);delete this.qd[a];Ea(this.qd)&&(this.Sa=1E3,this.Fa||nh(this,0))};
function wh(a,b,c){c=c?Ja(c,function(a){return yc(a)}).join("$"):"default";(a=qh(a,b,c))&&a.G&&a.G("permission_denied")}function qh(a,b,c){b=(new J(b)).toString();var d;n(a.$[b])?(d=a.$[b][c],delete a.$[b][c],0===xa(a.$[b])&&delete a.$[b]):d=void 0;return d}
function sh(a,b,c){C("Auth token revoked: "+b+"/"+c);a.ob=null;a.de=!0;a.Fa.close();if("invalid_token"===b||"permission_denied"===b)a.ke++,3<=a.ke&&(a.Sa=3E4,a=a.$c,b='Provided authentication credentials for the app named "'+a.oc.name+'" are invalid. This usually indicates your app was not initialized correctly. ',b="credential"in a.oc.options?b+'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in
a.oc.options?b+'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':b+'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',N(b))}
function xh(a){rh(a);r(a.$,function(b){r(b,function(b){ph(a,b)})});for(var b=0;b<a.pa.length;b++)a.pa[b]&&vh(a,b);for(;a.Kc.length;)b=a.Kc.shift(),th(a,b.action,b.we,b.data,b.G)}function zh(a){var b;b=Eg.Vb().hc;return Ea(a.qd)&&b};var Y={Mf:function(){Jg=Sg=!0}};Y.forceLongPolling=Y.Mf;Y.Nf=function(){Kg=!0};Y.forceWebSockets=Y.Nf;Y.Tf=function(){return Rg.isAvailable()};Y.isWebSocketsAvailable=Y.Tf;Y.lg=function(a,b){a.u.Ra.ze=b};Y.setSecurityDebugCallback=Y.lg;Y.Be=function(a,b){a.u.Be(b)};Y.stats=Y.Be;Y.Ce=function(a,b){a.u.Ce(b)};Y.statsIncrementCounter=Y.Ce;Y.fd=function(a){return a.u.fd};Y.dataUpdateCount=Y.fd;Y.Sf=function(a,b){a.u.je=b};Y.interceptServerData=Y.Sf;function Jd(a,b,c){this.app=c;var d=new qb(c);this.L=a;this.Va=wd(a);this.Vc=null;this.ca=new hf;this.vd=1;this.Ra=null;if(b||0<=("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.va=new Lc(this.L,q(this.Gb,this),d),setTimeout(q(this.Jc,this,!0),0);else{b=c.options.databaseAuthVariableOverride;if("undefined"!==da(b)&&null!==b){if("object"!==da(b))throw Error("Only objects are supported for option databaseAuthVariableOverride");
try{w(b)}catch(e){throw Error("Invalid authOverride provided: "+e);}}this.va=this.Ra=new lh(this.L,q(this.Gb,this),q(this.Jc,this),q(this.ue,this),d,b)}var f=this;rb(d,function(a){f.va.kf(a)});this.og=xd(a,q(function(){return new td(this.Va,this.va)},this));this.mc=new se;this.ie=new Ab;this.pd=new ig({Ae:function(a,b,c,d){b=[];c=f.ie.j(a.path);c.e()||(b=kg(f.pd,new ub(qe,a.path,c)),setTimeout(function(){d("ok")},0));return b},Od:ba});Ah(this,"connected",!1);this.ia=new Qb;this.Ya=new Id(this);this.fd=
0;this.je=null;this.K=new ig({Ae:function(a,b,c,d){f.va.$e(a,c,b,function(b,c){var e=d(b,c);nf(f.ca,a.path,e)});return[]},Od:function(a,b){f.va.uf(a,b)}})}g=Jd.prototype;g.toString=function(){return(this.L.Sc?"https://":"http://")+this.L.host};g.name=function(){return this.L.pe};function Bh(a){a=a.ie.j(new J(".info/serverTimeOffset")).H()||0;return(new Date).getTime()+a}function Ch(a){a=a={timestamp:Bh(a)};a.timestamp=a.timestamp||(new Date).getTime();return a}
g.Gb=function(a,b,c,d){this.fd++;var e=new J(a);b=this.je?this.je(a,b):b;a=[];d?c?(b=va(b,function(a){return K(a)}),a=sg(this.K,e,b,d)):(b=K(b),a=og(this.K,e,b,d)):c?(d=va(b,function(a){return K(a)}),a=ng(this.K,e,d)):(d=K(b),a=kg(this.K,new ub(qe,e,d)));d=e;0<a.length&&(d=Dh(this,e));nf(this.ca,d,a)};g.Jc=function(a){Ah(this,"connected",a);!1===a&&Eh(this)};g.ue=function(a){var b=this;Ac(a,function(a,d){Ah(b,d,a)})};
function Ah(a,b,c){b=new J("/.info/"+b);c=K(c);var d=a.ie;d.Jd=d.Jd.F(b,c);c=kg(a.pd,new ub(qe,b,c));nf(a.ca,b,c)}g.Jb=function(a,b,c,d){this.f("set",{path:a.toString(),value:b,ug:c});var e=Ch(this);b=K(b,c);var e=Tb(b,e),f=this.vd++,e=jg(this.K,a,e,f,!0);jf(this.ca,e);var h=this;this.va.put(a.toString(),b.H(!0),function(b,c){var e="ok"===b;e||N("set at "+a+" failed: "+b);e=mg(h.K,f,!e);nf(h.ca,a,e);Fh(d,b,c)});e=Gh(this,a);Dh(this,e);nf(this.ca,e,[])};
g.update=function(a,b,c){this.f("update",{path:a.toString(),value:b});var d=!0,e=Ch(this),f={};r(b,function(a,b){d=!1;var c=K(a);f[b]=Tb(c,e)});if(d)C("update() called with empty data.  Don't do anything."),Fh(c,"ok");else{var h=this.vd++,k=lg(this.K,a,f,h);jf(this.ca,k);var m=this;this.va.af(a.toString(),b,function(b,d){var e="ok"===b;e||N("update at "+a+" failed: "+b);var e=mg(m.K,h,!e),f=a;0<e.length&&(f=Dh(m,a));nf(m.ca,f,e);Fh(c,b,d)});r(b,function(b,c){var d=Gh(m,a.n(c));Dh(m,d)});nf(this.ca,
a,[])}};function Eh(a){a.f("onDisconnectEvents");var b=Ch(a),c=[];Rb(Pb(a.ia,b),D,function(b,e){c=c.concat(kg(a.K,new ub(qe,b,e)));var f=Gh(a,b);Dh(a,f)});a.ia=new Qb;nf(a.ca,D,c)}g.xd=function(a,b){var c=this;this.va.xd(a.toString(),function(d,e){"ok"===d&&Pd(c.ia,a);Fh(b,d,e)})};function Le(a,b,c,d){var e=K(c);a.va.re(b.toString(),e.H(!0),function(c,h){"ok"===c&&Sb(a.ia,b,e);Fh(d,c,h)})}
function Me(a,b,c,d,e){var f=K(c,d);a.va.re(b.toString(),f.H(!0),function(c,d){"ok"===c&&Sb(a.ia,b,f);Fh(e,c,d)})}function Ne(a,b,c,d){var e=!0,f;for(f in c)e=!1;e?(C("onDisconnect().update() called with empty data.  Don't do anything."),Fh(d,"ok")):a.va.cf(b.toString(),c,function(e,f){if("ok"===e)for(var m in c){var l=K(c[m]);Sb(a.ia,b.n(m),l)}Fh(d,e,f)})}function yf(a,b,c){c=".info"===O(b.path)?a.pd.Nb(b,c):a.K.Nb(b,c);lf(a.ca,b.path,c)}g.ab=function(){this.Ra&&this.Ra.ab("repo_interrupt")};
g.kc=function(){this.Ra&&this.Ra.kc("repo_interrupt")};g.Be=function(a){if("undefined"!==typeof console){a?(this.Vc||(this.Vc=new Db(this.Va)),a=this.Vc.get()):a=this.Va.get();var b=Ka(Aa(a),function(a,b){return Math.max(b.length,a)},0),c;for(c in a){for(var d=a[c],e=c.length;e<b+2;e++)c+=" ";console.log(c+d)}}};g.Ce=function(a){Cb(this.Va,a);this.og.rf[a]=!0};g.f=function(a){var b="";this.Ra&&(b=this.Ra.id+":");C(b,arguments)};
function Fh(a,b,c){a&&Dc(function(){if("ok"==b)a(null);else{var d=(b||"error").toUpperCase(),e=d;c&&(e+=": "+c);e=Error(e);e.code=d;a(e)}})};function Hh(a,b,c,d,e){function f(){}a.f("transaction on "+b);var h=new R(a,b);h.gc("value",f);c={path:b,update:c,G:d,status:null,ef:ic(),He:e,of:0,Rd:function(){h.Ic("value",f)},Td:null,Ba:null,cd:null,dd:null,ed:null};d=a.K.Aa(b,void 0)||H;c.cd=d;d=c.update(d.H());if(n(d)){De("transaction failed: Data returned ",d,c.path);c.status=1;e=te(a.mc,b);var k=e.Ca()||[];k.push(c);ue(e,k);"object"===typeof d&&null!==d&&fb(d,".priority")?(k=x(d,".priority"),I(Be(k),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):
k=(a.K.Aa(b)||H).C().H();e=Ch(a);d=K(d,k);e=Tb(d,e);c.dd=d;c.ed=e;c.Ba=a.vd++;c=jg(a.K,b,e,c.Ba,c.He);nf(a.ca,b,c);Ih(a)}else c.Rd(),c.dd=null,c.ed=null,c.G&&(a=new T(c.cd,new R(a,c.path),L),c.G(null,!1,a))}function Ih(a,b){var c=b||a.mc;b||Jh(a,c);if(null!==c.Ca()){var d=Kh(a,c);I(0<d.length,"Sending zero length transaction queue");La(d,function(a){return 1===a.status})&&Lh(a,c.path(),d)}else c.kd()&&c.O(function(b){Ih(a,b)})}
function Lh(a,b,c){for(var d=Ja(c,function(a){return a.Ba}),e=a.K.Aa(b,d)||H,d=e,e=e.hash(),f=0;f<c.length;f++){var h=c[f];I(1===h.status,"tryToSendTransactionQueue_: items in queue should all be run.");h.status=2;h.of++;var k=Q(b,h.path),d=d.F(k,h.dd)}d=d.H(!0);a.va.put(b.toString(),d,function(d){a.f("transaction put response",{path:b.toString(),status:d});var e=[];if("ok"===d){d=[];for(f=0;f<c.length;f++){c[f].status=3;e=e.concat(mg(a.K,c[f].Ba));if(c[f].G){var h=c[f].ed,k=new R(a,c[f].path);d.push(q(c[f].G,
null,null,!0,new T(h,k,L)))}c[f].Rd()}Jh(a,te(a.mc,b));Ih(a);nf(a.ca,b,e);for(f=0;f<d.length;f++)Dc(d[f])}else{if("datastale"===d)for(f=0;f<c.length;f++)c[f].status=4===c[f].status?5:1;else for(N("transaction at "+b.toString()+" failed: "+d),f=0;f<c.length;f++)c[f].status=5,c[f].Td=d;Dh(a,b)}},e)}function Dh(a,b){var c=Mh(a,b),d=c.path(),c=Kh(a,c);Nh(a,c,d);return d}
function Nh(a,b,c){if(0!==b.length){for(var d=[],e=[],f=Ia(b,function(a){return 1===a.status}),f=Ja(f,function(a){return a.Ba}),h=0;h<b.length;h++){var k=b[h],m=Q(c,k.path),l=!1,u;I(null!==m,"rerunTransactionsUnderNode_: relativePath should not be null.");if(5===k.status)l=!0,u=k.Td,e=e.concat(mg(a.K,k.Ba,!0));else if(1===k.status)if(25<=k.of)l=!0,u="maxretry",e=e.concat(mg(a.K,k.Ba,!0));else{var z=a.K.Aa(k.path,f)||H;k.cd=z;var F=b[h].update(z.H());n(F)?(De("transaction failed: Data returned ",F,
k.path),m=K(F),"object"===typeof F&&null!=F&&fb(F,".priority")||(m=m.fa(z.C())),z=k.Ba,F=Ch(a),F=Tb(m,F),k.dd=m,k.ed=F,k.Ba=a.vd++,Oa(f,z),e=e.concat(jg(a.K,k.path,F,k.Ba,k.He)),e=e.concat(mg(a.K,z,!0))):(l=!0,u="nodata",e=e.concat(mg(a.K,k.Ba,!0)))}nf(a.ca,c,e);e=[];l&&(b[h].status=3,setTimeout(b[h].Rd,Math.floor(0)),b[h].G&&("nodata"===u?(k=new R(a,b[h].path),d.push(q(b[h].G,null,null,!1,new T(b[h].cd,k,L)))):d.push(q(b[h].G,null,Error(u),!1,null))))}Jh(a,a.mc);for(h=0;h<d.length;h++)Dc(d[h]);Ih(a)}}
function Mh(a,b){for(var c,d=a.mc;null!==(c=O(b))&&null===d.Ca();)d=te(d,c),b=E(b);return d}function Kh(a,b){var c=[];Oh(a,b,c);c.sort(function(a,b){return a.ef-b.ef});return c}function Oh(a,b,c){var d=b.Ca();if(null!==d)for(var e=0;e<d.length;e++)c.push(d[e]);b.O(function(b){Oh(a,b,c)})}function Jh(a,b){var c=b.Ca();if(c){for(var d=0,e=0;e<c.length;e++)3!==c[e].status&&(c[d]=c[e],d++);c.length=d;ue(b,0<c.length?c:null)}b.O(function(b){Jh(a,b)})}
function Gh(a,b){var c=Mh(a,b).path(),d=te(a.mc,b);xe(d,function(b){Ph(a,b)});Ph(a,d);we(d,function(b){Ph(a,b)});return c}
function Ph(a,b){var c=b.Ca();if(null!==c){for(var d=[],e=[],f=-1,h=0;h<c.length;h++)4!==c[h].status&&(2===c[h].status?(I(f===h-1,"All SENT items should be at beginning of queue."),f=h,c[h].status=4,c[h].Td="set"):(I(1===c[h].status,"Unexpected transaction status in abort"),c[h].Rd(),e=e.concat(mg(a.K,c[h].Ba,!0)),c[h].G&&d.push(q(c[h].G,null,Error("set"),!1,null))));-1===f?ue(b,null):c.length=f+1;nf(a.ca,b.path(),e);for(h=0;h<d.length;h++)Dc(d[h])}};function Od(){this.lb={};this.wf=!1}Od.prototype.ab=function(){for(var a in this.lb)this.lb[a].ab()};Od.prototype.kc=function(){for(var a in this.lb)this.lb[a].kc()};Od.prototype.ce=function(a){this.wf=a};ca(Od);Od.prototype.interrupt=Od.prototype.ab;Od.prototype.resume=Od.prototype.kc;var Z={};Z.nc=lh;Z.DataConnection=Z.nc;lh.prototype.ng=function(a,b){this.ua("q",{p:a},b)};Z.nc.prototype.simpleListen=Z.nc.prototype.ng;lh.prototype.Hf=function(a,b){this.ua("echo",{d:a},b)};Z.nc.prototype.echo=Z.nc.prototype.Hf;lh.prototype.interrupt=lh.prototype.ab;Z.zf=$g;Z.RealTimeConnection=Z.zf;$g.prototype.sendRequest=$g.prototype.ua;$g.prototype.close=$g.prototype.close;
Z.Rf=function(a){var b=lh.prototype.put;lh.prototype.put=function(c,d,e,f){n(f)&&(f=a());b.call(this,c,d,e,f)};return function(){lh.prototype.put=b}};Z.hijackHash=Z.Rf;Z.yf=Jb;Z.ConnectionTarget=Z.yf;Z.ja=function(a){return a.ja()};Z.queryIdentifier=Z.ja;Z.Uf=function(a){return a.u.Ra.$};Z.listens=Z.Uf;Z.ce=function(a){Od.Vb().ce(a)};Z.forceRestClient=Z.ce;Z.Context=Od;function R(a,b){if(!(a instanceof Jd))throw Error("new Firebase() no longer supported - use app.database().");W.call(this,a,b,Hf,!1);this.then=void 0;this["catch"]=void 0}la(R,W);g=R.prototype;g.getKey=function(){y("Firebase.key",0,0,arguments.length);return this.path.e()?null:Ed(this.path)};
g.n=function(a){y("Firebase.child",1,1,arguments.length);if(ga(a))a=String(a);else if(!(a instanceof J))if(null===O(this.path)){var b=a;b&&(b=b.replace(/^\/*\.info(\/|$)/,"/"));Je("Firebase.child",b)}else Je("Firebase.child",a);return new R(this.u,this.path.n(a))};g.getParent=function(){y("Firebase.parent",0,0,arguments.length);var a=this.path.parent();return null===a?null:new R(this.u,a)};
g.Of=function(){y("Firebase.ref",0,0,arguments.length);for(var a=this;null!==a.getParent();)a=a.getParent();return a};g.Gf=function(){return this.u.Ya};g.set=function(a,b){y("Firebase.set",1,2,arguments.length);Ke("Firebase.set",this.path);Ce("Firebase.set",a,this.path,!1);B("Firebase.set",2,b,!0);var c=new ib;this.u.Jb(this.path,a,null,jb(c,b));return c.ra};
g.update=function(a,b){y("Firebase.update",1,2,arguments.length);Ke("Firebase.update",this.path);if(ea(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c;N("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fe("Firebase.update",a,this.path);B("Firebase.update",2,b,!0);c=new ib;this.u.update(this.path,a,jb(c,b));return c.ra};
g.Jb=function(a,b,c){y("Firebase.setWithPriority",2,3,arguments.length);Ke("Firebase.setWithPriority",this.path);Ce("Firebase.setWithPriority",a,this.path,!1);Ge("Firebase.setWithPriority",2,b);B("Firebase.setWithPriority",3,c,!0);if(".length"===this.getKey()||".keys"===this.getKey())throw"Firebase.setWithPriority failed: "+this.getKey()+" is a read-only object.";var d=new ib;this.u.Jb(this.path,a,b,jb(d,c));return d.ra};
g.remove=function(a){y("Firebase.remove",0,1,arguments.length);Ke("Firebase.remove",this.path);B("Firebase.remove",1,a,!0);return this.set(null,a)};
g.transaction=function(a,b,c){y("Firebase.transaction",1,3,arguments.length);Ke("Firebase.transaction",this.path);B("Firebase.transaction",1,a,!1);B("Firebase.transaction",2,b,!0);if(n(c)&&"boolean"!=typeof c)throw Error(A("Firebase.transaction",3,!0)+"must be a boolean.");if(".length"===this.getKey()||".keys"===this.getKey())throw"Firebase.transaction failed: "+this.getKey()+" is a read-only object.";"undefined"===typeof c&&(c=!0);var d=new ib;ha(b)&&kb(d.ra);Hh(this.u,this.path,a,function(a,c,h){a?
d.reject(a):d.resolve(new pb(c,h));ha(b)&&b(a,c,h)},c);return d.ra};g.kg=function(a,b){y("Firebase.setPriority",1,2,arguments.length);Ke("Firebase.setPriority",this.path);Ge("Firebase.setPriority",1,a);B("Firebase.setPriority",2,b,!0);var c=new ib;this.u.Jb(this.path.n(".priority"),a,null,jb(c,b));return c.ra};
g.push=function(a,b){y("Firebase.push",0,2,arguments.length);Ke("Firebase.push",this.path);Ce("Firebase.push",a,this.path,!0);B("Firebase.push",2,b,!0);var c=Bh(this.u),d=Cd(c),c=this.n(d),e=this.n(d),d=null!=a?c.set(a,b).then(function(){return e}):hb.resolve(e);c.then=q(d.then,d);c["catch"]=q(d.then,d,void 0);ha(b)&&kb(d);return c};g.ib=function(){Ke("Firebase.onDisconnect",this.path);return new U(this.u,this.path)};R.prototype.child=R.prototype.n;R.prototype.set=R.prototype.set;
R.prototype.update=R.prototype.update;R.prototype.setWithPriority=R.prototype.Jb;R.prototype.remove=R.prototype.remove;R.prototype.transaction=R.prototype.transaction;R.prototype.setPriority=R.prototype.kg;R.prototype.push=R.prototype.push;R.prototype.onDisconnect=R.prototype.ib;Ec(R.prototype,"database",R.prototype.Gf);Ec(R.prototype,"key",R.prototype.getKey);Ec(R.prototype,"parent",R.prototype.getParent);Ec(R.prototype,"root",R.prototype.Of);if("undefined"===typeof firebase)throw Error("Cannot install Firebase Database - be sure to load firebase-app.js first.");
try{firebase.INTERNAL.registerService("database",function(a){var b=Od.Vb(),c=a.options.databaseURL;n(c)||sc("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.intializeApp().");var d=tc(c),c=d.jc;Nd("Invalid Firebase Database URL",d);d.path.e()||sc("Database URL must point to the root of a Firebase Database (not including a child path).");(d=x(b.lb,a.name))&&sc("FIREBASE INTERNAL ERROR: Database initialized multiple times.");d=new Jd(c,b.wf,a);b.lb[a.name]=
d;return d.Ya},{Reference:R,Query:W,Database:Id,enableLogging:pc,INTERNAL:Y,TEST_ACCESS:Z,ServerValue:Ld})}catch(Qh){sc("Failed to register the Firebase Database Service ("+Qh+")")};})();
          //# sourceMappingURL=firebase-database.js.map
